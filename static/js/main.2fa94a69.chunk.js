(this["webpackJsonplibraries-at-home"]=this["webpackJsonplibraries-at-home"]||[]).push([[0],{204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getPosition",(function(){return _e})),a.d(n,"getCurrentPosition",(function(){return Te})),a.d(n,"getCurrentPostcode",(function(){return Ie})),a.d(n,"getPostcode",(function(){return Ce})),a.d(n,"getServiceDataFromPostcode",(function(){return Pe})),a.d(n,"getNearestLibrary",(function(){return Ae})),a.d(n,"getNearestMobileLibrary",(function(){return Re})),a.d(n,"validatePostcode",(function(){return Be}));var r=a(0),c=a.n(r),i=a(19),o=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(10),l=a(272),d=a(154),u=a.n(d),b=a(91),j=a.n(b),p=a(155),h=a(271),m=a(1),g=Object(r.createContext)(),f=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(m.jsx)(g.Provider,{value:Object(r.useReducer)(t,a),children:n})},x=function(){return Object(r.useContext)(g)},O=Object(r.createContext)(),v=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(m.jsx)(O.Provider,{value:Object(r.useReducer)(t,a),children:n})},y=function(){return Object(r.useContext)(O)},k=Object(r.createContext)(),w=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(m.jsx)(k.Provider,{value:Object(r.useReducer)(t,a),children:n})},N=function(){return Object(r.useContext)(k)},S=a(14),L=a.n(S),_=a(21),T=a(60),I=a(12),C=a(41),P=a(18),A=a(258),R=a(270),B=a(250),M=a(260),F=a(206),D=a(276),U=a(254),W=a(261),z=a(274),Y=a(259),E=a(282),H=a(129),V=a.n(H),G=a(131),J=a.n(G),Z=a(64),$=a.n(Z),q=a(101),K=a.n(q),X=a(130),Q=a.n(X),ee=a(127),te=a.n(ee),ae=a(90),ne=a.n(ae),re=a(128),ce=a.n(re),ie=a(82),oe=a.n(ie),se=a(89),le=a.n(se),de=a(156),ue=a(273),be=a(255),je=a(256),pe=a(277),he=a(257),me=a(279),ge=a(285),fe=a(98),xe=a(124),Oe=a.n(xe),ve=a(125),ye=a.n(ve),ke=a(126),we=a.n(ke),Ne=a(42),Se=a.n(Ne),Le=a(53),_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,a){navigator.geolocation.getCurrentPosition(t,a,e)}))},Te=function(){var e=Object(_.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e.next=3,_e(t);case 3:return a=e.sent,e.abrupt("return",[a.coords.longitude,a.coords.latitude]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(_.a)(L.a.mark((function e(t,a){var n,r,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.postcodes.io/postcodes?lon=".concat(t,"&lat=").concat(a),e.prev=1,e.next=4,Se.a.get(n);case 4:if(200!==(r=e.sent).status){e.next=9;break}if(!((c=r.data.result).length>0)){e.next=9;break}return e.abrupt("return",c[0].postcode);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(_.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.a.get(Le.postcodeApi+t);case 2:return a=e.sent,e.abrupt("return",{location:[a.data.longitude,a.data.latitude],library_service_name:a.data.library_service_name,library_service:a.data.library_service});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(_.a)(L.a.mark((function e(t,a){var n,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t);case 2:if(n=e.sent,!((r=a.filter((function(e){return e.Code===n.library_service}))).length>0)){e.next=6;break}return e.abrupt("return",{service:r[0],location:n.location});case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(_.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.a.get(Le.libraryApi+"?latitude="+t[1]+"&longitude="+t[0]);case 2:return a=e.sent,e.abrupt("return",a&&a.data&&a.data.length>0?a.data[0]:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(_.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.a.get(Le.mobileLibraryApi+"?latitude="+t[1]+"&longitude="+t[0]);case 2:return a=e.sent,e.abrupt("return",a&&a.data&&a.data.length>0?a.data[0]:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(e){return/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/.test(e.trim())},Me=function(e,t){var a=new URLSearchParams(window.location.search);a.set("service",t),e.push(window.location.pathname+"?"+a.toString())},Fe=function(e){new URLSearchParams(window.location.search).delete("service"),e.push(window.location.pathname)},De=Object(B.a)((function(e){return{grow:{flexGrow:1},iconButton:{padding:e.spacing()},iconProgress:{margin:e.spacing()},inputInput:{paddingTop:e.spacing(),paddingRight:e.spacing(),paddingBottom:e.spacing(),paddingLeft:e.spacing(2),fontWeight:e.typography.fontWeightBold},search:{position:"relative",border:"1px solid #E0E0E0",borderColor:e.palette.outline.main,borderRadius:e.shape.borderRadius,backgroundColor:Object(fe.fade)(e.palette.common.white,.8),"&:hover":{backgroundColor:Object(fe.fade)(e.palette.common.white,.9)},marginLeft:0,marginRight:e.spacing(),display:"flex",maxWidth:240}}}));var Ue=Object(P.g)((function(e){var t=e.settings,a=x(),c=Object(I.a)(a,1)[0].services,i=y(),o=Object(I.a)(i,2),s=o[0],l=s.searchType,d=s.searchPostcode,u=(s.searchDistance,s.searchPosition),b=o[1],j=N(),p=Object(I.a)(j,2),h=p[0],g=h.loadingPostcode,f=h.loadingLocation,O=p[1],v=Object(r.useState)(d||""),k=Object(I.a)(v,2),w=k[0],S=k[1],T=Object(r.useState)(null),C=Object(I.a)(T,2),P=C[0],A=C[1],R=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}({searchPostcode:d});Object(r.useEffect)((function(){R&&d!==R.searchPostcode&&S(d)}),[d,R]);var B=function(){var e=Object(_.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=16;break}if(O({type:"ToggleLoadingLocation"}),!(u.length>0)){e.next=6;break}e.t0=u,e.next=9;break;case 6:return e.next=8,Te();case 8:e.t0=e.sent;case 9:return t=e.t0,b({type:"SetLocation",searchPosition:t}),e.next=13,M(t);case 13:a=e.sent,O({type:"ToggleLoadingLocation"}),a&&""!==a&&W(a);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(_.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=6;break}return e.next=3,Ie.apply(n,Object(de.a)(t));case 3:return a=e.sent,S(a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){return A(null)},D=function(e){F(),b({type:"SetSearchDistance",searchDistance:e}),"postcode"===l&&W(w)},W=function(){var t=Object(_.a)(L.a.mark((function t(){var a,n,r,i,o,s,l=arguments;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=l.length>0&&void 0!==l[0]?l[0]:w)&&""!==a){t.next=4;break}return O({type:"ShowNotification",notificationMessage:"Please enter a postcode before searching",notificationSeverity:"warning"}),t.abrupt("return");case 4:if(O({type:"ToggleLoadingPostcode"}),O({type:"LoadingPostcode"}),!Be(a)){t.next=27;break}return t.next=9,Pe(a.trim(),c);case 9:if(!(n=t.sent).location){t.next=24;break}return b({type:"SetPostcodeSearch",searchPostcode:a,searchPosition:n.location}),b({type:"SetService",service:n.service}),Me(e.history,n.service.systemName),t.next=16,Promise.all([Ae(n.location),Re(n.location)]);case 16:r=t.sent,i=Object(I.a)(r,2),o=i[0],s=i[1],b({type:"SetLibrary",library:o}),b({type:"SetMobileLibrary",mobileLibrary:s}),t.next=25;break;case 24:O({type:"ShowNotification",notificationMessage:"We could not find that postcode",notificationSeverity:"error"});case 25:t.next=28;break;case 27:O({type:"ShowNotification",notificationMessage:"We could not find that postcode",notificationSeverity:"error"});case 28:O({type:"ToggleLoadingPostcode"});case 29:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=De();return Object(m.jsxs)("div",{className:z.search,children:[Object(m.jsx)(pe.a,{placeholder:"Postcode",classes:{input:z.inputInput},value:w,onChange:function(e){return S(e.target.value.toUpperCase())},onKeyDown:function(e){13===e.keyCode&&W()},inputProps:{"aria-label":"search by postcode"}}),"postcode"===l?Object(m.jsx)(E.a,{title:"Clear search",children:Object(m.jsx)(U.a,{"aria-label":"Clear search",className:z.iconButton,onClick:function(){return S(""),b({type:"ClearAll"}),void Fe(e.history)},children:Object(m.jsx)(Oe.a,{})})}):null,Object(m.jsx)("div",{className:z.grow}),Object(m.jsx)(E.a,{title:"Search by postcode",children:g?Object(m.jsx)(ue.a,{position:"relative",display:"inline-flex",className:z.iconProgress,children:Object(m.jsx)(be.a,{size:22})}):Object(m.jsx)(U.a,{"aria-label":"Search",color:"primary",className:z.iconButton,onClick:function(){return W()},children:Object(m.jsx)(oe.a,{})})}),Object(m.jsx)(je.a,{orientation:"vertical",flexItem:!0}),Object(m.jsx)(E.a,{title:"Use your current location",children:f?Object(m.jsx)(ue.a,{position:"relative",display:"inline-flex",className:z.iconProgress,children:Object(m.jsx)(be.a,{size:22})}):Object(m.jsx)(U.a,{"aria-label":"Search by current location",color:"primary",className:z.iconButton,onClick:function(){return B()},children:Object(m.jsx)(ye.a,{})})}),t?Object(m.jsx)(E.a,{title:"Change search settings",children:Object(m.jsx)(U.a,{"aria-label":"Open search settings menu",className:z.iconButton,color:"secondary",onClick:function(e){!function(e){A(e.currentTarget)}(e)},children:Object(m.jsx)(we.a,{})})}):null,Object(m.jsxs)(me.a,{id:"mnu-settings",anchorEl:P,keepMounted:!0,open:Boolean(P),onClose:function(){return F()},children:[Object(m.jsx)(he.a,{disableSticky:!0,children:"Search distance"}),Object(m.jsx)(ge.a,{onClick:function(){return D(1609)},children:"1 mile"}),Object(m.jsx)(ge.a,{onClick:function(){return D(4827)},children:"3 miles"}),Object(m.jsx)(ge.a,{onClick:function(){return D(8045)},children:"5 miles"}),Object(m.jsx)(ge.a,{onClick:function(){return D(16090)},children:"10 miles"}),Object(m.jsx)(ge.a,{onClick:function(){return D(32180)},children:"20 miles"}),Object(m.jsx)(ge.a,{onClick:function(){return D(80450)},children:"50 miles"})]})]})})),We=Object(B.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,position:"relative"},appBarTransparent:{zIndex:e.zIndex.drawer+1,backgroundColor:"rgba(250, 250, 250, 0.8)",position:"relative"},grow:{flexGrow:1},topIcon:{backgroundColor:"rgba(250, 250, 250, 0.8)","&:hover":{backgroundColor:"rgba(250, 250, 250, 0.8)"}},topTitle:{position:"relative",zIndex:e.zIndex.drawer+1}}}));var ze=function(e){var t=e.site,a=y(),n=Object(I.a)(a,1)[0].currentServiceSystemName,c=Object(r.useState)(!1),i=Object(I.a)(c,2),o=i[0],s=i[1],l=Object(r.useState)(t),d=Object(I.a)(l,2),u=d[0],b=d[1],j=Object(P.f)(),p=We(),h=function(e){return n?e+"?service="+n:e},g=[{title:"Library lab",url:"https://www.librarylab.uk",icon:Object(m.jsx)(le.a,{}),links:[{title:"About library lab",short:"Lab",icon:Object(m.jsx)(le.a,{}),to:"/"}]},{title:"Libraries at home",url:"https://www.librariesathome.co.uk",icon:Object(m.jsx)(te.a,{}),links:[{title:"Find service",short:"Find",icon:Object(m.jsx)(oe.a,{}),to:h("/")},{title:"Watch library TV",short:"Watch",icon:Object(m.jsx)(ce.a,{}),to:"/watch"},{title:"Read blogs",short:"Read",icon:Object(m.jsx)(V.a,{}),to:"/read"},{title:"Listen podcasts",short:"Listen",icon:Object(m.jsx)(Q.a,{}),to:"/listen"}]},{title:"Mobile libraries",url:"https://www.mobilelibraries.org",icon:Object(m.jsx)($.a,{}),links:[{title:"Find my stop",short:"Stops",icon:Object(m.jsx)(K.a,{}),to:"/"},{title:"Mobile vans",short:"Vans",icon:Object(m.jsx)($.a,{}),to:"/mobiles"},{title:"Map of stops",short:"Map",icon:Object(m.jsx)(ne.a,{}),to:"/map"}]},{title:"Library map",url:"https://www.librarymap.co.uk",icon:Object(m.jsx)(ne.a,{}),links:[{title:"Find my library",short:"Find",icon:Object(m.jsx)(K.a,{}),to:h("/")},{title:"Map of libraries",short:"Map",icon:Object(m.jsx)(ne.a,{}),to:h("/map")}]}],f="/map"===j.pathname?p.appBarTransparent:p.appBar;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(A.a,{maxWidth:"lg",className:p.topTitle,children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(U.a,{"aria-label":"Toggle site menu",className:p.topIcon,color:"primary",onClick:function(){s(!o),b(t)},children:o?Object(m.jsx)(J.a,{}):Object(m.jsx)(le.a,{})}),Object(m.jsx)("span",{className:p.grow})]})}),o?Object(m.jsx)(M.a,{position:"static",color:"transparent",elevation:0,className:f,children:Object(m.jsx)(A.a,{maxWidth:"lg",children:Object(m.jsx)(z.a,{value:u,onChange:function(e,t){b(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"secondary",children:g.map((function(e,t){return Object(m.jsx)(W.a,{label:e.title,icon:e.icon},"tb_site_"+t)}))})})}):null,Object(m.jsx)(M.a,{position:"static",color:"transparent",elevation:0,className:f,children:Object(m.jsx)(A.a,{maxWidth:"lg",children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(D.a,{mdUp:!0,children:g[u].links.map((function(e,a){return Object(m.jsx)(E.a,{title:e.title,children:Object(m.jsx)(F.a,{component:C.b,to:u===t?e.to:g[u].url+e.to,disableRipple:j.pathname===e.to,disableFocusRipple:j.pathname===e.to,color:"secondary",size:"large",startIcon:e.icon,children:e.short})},"icnb_menu_lg_"+a)}))}),Object(m.jsx)(D.a,{smDown:!0,children:g[u].links.map((function(e,a){return Object(m.jsx)(E.a,{title:e.title,children:Object(m.jsx)(F.a,{component:C.b,to:u===t?e.to:g[u].url+e.to,disableRipple:j.pathname===e.to,disableFocusRipple:j.pathname===e.to,color:"secondary",size:"large",startIcon:e.icon,children:e.title})},"icnb_menu_lg_"+a)}))}),Object(m.jsx)("span",{className:p.grow}),"/map"===j.pathname?Object(m.jsx)(Ue,{}):null]})})})]})},Ye=a(262),Ee=a(263),He=a(66),Ve=a(132),Ge=a.n(Ve),Je=Object(B.a)((function(e){return{root:{paddingTop:e.spacing(5),marginTop:e.spacing(3),marginBottom:e.spacing(5),width:"100%"},bullet:{margin:e.spacing(2)},grid:{marginTop:e.spacing(2)},loveIcon:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},footerText:{verticalAlign:"middle",display:"inline-flex"},footerRight:{textAlign:"right"},tapTarget:{lineHeight:2.2,fontSize:16}}}));var Ze=function(){var e=Je();return Object(m.jsxs)("div",{className:e.root,children:[Object(m.jsx)(je.a,{}),Object(m.jsxs)(Ye.a,{container:!0,spacing:3,className:e.grid,children:[Object(m.jsxs)(Ye.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:[Object(m.jsxs)(He.a,{variant:"button",children:[Object(m.jsx)(Ee.a,{href:"https://www.librarylab.uk/libraries-at-home",target:"_blank",rel:"noopener",title:"About the library lab projects and documentation for this project",className:e.tapTarget,children:"About this project"}),Object(m.jsx)("span",{className:e.bullet,children:" \u2022 "}),Object(m.jsx)(Ee.a,{component:C.b,to:"/accessibility",title:"How we make this site accessible",className:e.tapTarget,children:"Accessibility"}),Object(m.jsx)("span",{className:e.bullet,children:" \u2022 "}),Object(m.jsx)(Ee.a,{component:C.b,to:"/privacy",title:"Your privacy on this site",className:e.tapTarget,children:"Privacy"}),Object(m.jsx)("span",{className:e.bullet,children:" \u2022 "}),Object(m.jsx)(Ee.a,{component:C.b,to:"/data",title:"Data used on this site and licensing",className:e.tapTarget,children:"Data"}),Object(m.jsx)("span",{className:e.bullet,children:" \u2022 "}),Object(m.jsx)(Ee.a,{href:"https://github.com/LibrariesHacked/libraries-at-home",target:"_blank",rel:"noopener",title:"Project on GitHub",className:e.tapTarget,children:"GitHub"})]}),Object(m.jsx)("br",{}),Object(m.jsx)(He.a,{variant:"body2",className:e.footerText,children:"A Library Lab project by Libraries Hacked."})]}),Object(m.jsxs)(Ye.a,{className:e.footerRight,item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:[Object(m.jsx)(He.a,{variant:"body2",children:"Data help from"}),Object(m.jsxs)(He.a,{variant:"button",children:[Object(m.jsx)(Ee.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/calire",title:"Claire",className:e.tapTarget,children:"@calire"}),Object(m.jsx)("span",{className:e.bullet,children:" \u2022 "}),Object(m.jsx)(Ee.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/shedsue",title:"Sue",className:e.tapTarget,children:"@shedsue"}),Object(m.jsx)("span",{className:e.bullet,children:" \u2022 "}),Object(m.jsx)(Ee.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/richardveevers",title:"Richard",className:e.tapTarget,children:"@richardveevers"}),Object(m.jsx)("br",{}),Object(m.jsx)(Ge.a,{color:"error",className:e.loveIcon})]})]})]})]})},$e=a(264),qe=a(266),Ke=a(265),Xe=a(84),Qe=a.n(Xe),et=a(65),tt=a.n(et),at=Object(B.a)((function(e){return{bullet:{display:"inline-block",margin:"0 4px"},card:{marginLeft:e.spacing(1),marginRight:e.spacing(1),border:"2px solid #ffe0b2"},cardActions:{backgroundColor:"#fff3e0",color:"#388e3c"},libraryName:{fontWeight:e.typography.fontWeightBold}}}));var nt=Object(P.g)((function(e){var t=x(),a=Object(I.a)(t,1)[0].services,n=y(),r=Object(I.a)(n,2),c=r[0],i=c.library,o=c.service,s=r[1],l=at(),d=Object(m.jsx)("span",{className:l.bullet,children:" \u2022 "}),u=null!=i?Math.round(i.distance/1609):null;return Object(m.jsx)("div",{children:null!=i?Object(m.jsxs)($e.a,{elevation:0,className:l.card,children:[Object(m.jsxs)(Ke.a,{children:[Object(m.jsxs)(He.a,{component:"h2",variant:"h5",children:["Your nearest library is ",u," mile",1!==u?"s":""]}),Object(m.jsx)(He.a,{component:"p",variant:"h5",children:Object(m.jsx)("span",{className:l.libraryName,children:i.library_name})}),Object(m.jsxs)(He.a,{variant:"body2",component:"p",children:[[i.address_1,i.address_2,i.address_3,i.postcode].filter((function(e){return""!==e})).join(", "),d,i.local_authority,"Yes"===i.colocated&&null!==i.colocated_with?d+"Colocated with "+i.colocated_with:""]})]}),Object(m.jsxs)(qe.a,{className:l.cardActions,children:[Object(m.jsx)(F.a,{variant:"text",size:"large",color:"secondary",startIcon:Object(m.jsx)(tt.a,{}),target:"_blank",href:i.url,children:"Go to website"}),i.local_authority!==o.Name?Object(m.jsx)(F.a,{variant:"text",size:"large",color:"secondary",startIcon:Object(m.jsx)(Qe.a,{}),onClick:function(){return function(t){var n=a.filter((function(e){return e.Name===t}));n&&1===n.length&&(s({type:"SetService",service:n[0]}),Me(e.history,n[0].systemName))}(i.local_authority)},children:"Use this library service"}):null]})]}):null})})),rt=a(133),ct=a.n(rt),it=a(54),ot=a.n(it),st=Object(B.a)((function(e){return{card:{marginLeft:e.spacing(1),marginRight:e.spacing(1),border:"2px solid #c8e6c9"},cardActions:{backgroundColor:"#e8f5e9",color:"#388e3c"},libraryName:{fontWeight:e.typography.fontWeightBold},scheduleDate:{fontSize:"1.1em"}}}));var lt=Object(P.g)((function(e){var t=x(),a=Object(I.a)(t,1)[0].services,n=y(),r=Object(I.a)(n,2),c=r[0],i=c.mobileLibrary,o=c.service,s=r[1],l=st(),d=null!=i?Math.round(i.distance/1609):null;return Object(m.jsx)("div",{children:null!=i?Object(m.jsxs)($e.a,{elevation:0,className:l.card,children:[Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(He.a,{component:"h2",variant:"h5",children:"Your nearest mobile stop is "+d+" mile"+(1!==d?"s":"")}),Object(m.jsx)(He.a,{component:"p",variant:"h5",children:Object(m.jsxs)("span",{className:l.libraryName,children:[i.name," in ",i.community]})}),Object(m.jsxs)(He.a,{component:"p",variant:"body1",children:["Next visiting ",Object(m.jsx)("span",{className:l.scheduleDate,children:ot()(i.route_schedule[0]).format("h:mma dddd Do MMMM")})]})]}),Object(m.jsxs)(qe.a,{className:l.cardActions,children:[Object(m.jsx)(F.a,{variant:"text",size:"large",color:"secondary",startIcon:Object(m.jsx)(ct.a,{}),target:"_blank",href:i.timetable,children:"Go to timetable"}),i.organisation_name!==o.Name?Object(m.jsx)(F.a,{variant:"text",size:"large",color:"secondary",startIcon:Object(m.jsx)(Qe.a,{}),onClick:function(){return function(t){var n=a.filter((function(e){return e.Name===t}));n&&1===n.length&&(s({type:"SetService",service:n[0]}),Me(e.history,n[0].systemName))}(i.organisation_name)},children:"Use this library service"}):null]})]}):null})})),dt=a(286),ut=a(267),bt=a(268),jt=a(88),pt=a(137),ht=a.n(pt),mt=a(149),gt=a.n(mt),ft=a(138),xt=a.n(ft),Ot=a(139),vt=a.n(Ot),yt=a(86),kt=a.n(yt),wt=a(140),Nt=a.n(wt),St=a(141),Lt=a.n(St),_t=a(142),Tt=a.n(_t),It=a(143),Ct=a.n(It),Pt=a(144),At=a.n(Pt),Rt=a(87),Bt=a.n(Rt),Mt=a(145),Ft=a.n(Mt),Dt=a(148),Ut=a.n(Dt),Wt=a(146),zt=a.n(Wt),Yt=a(147),Et=a.n(Yt),Ht=a(134),Vt=a.n(Ht),Gt=a(135),Jt=a.n(Gt),Zt=a(136),$t=a.n(Zt),qt=a(150),Kt=a.n(qt),Xt=a(85),Qt=Object(B.a)((function(e){return{bullet:{margin:e.spacing()},card:{border:"2px solid #b3e5fc"},cardHeader:{backgroundColor:"#e1f5fe"},service:{display:"inline",fontWeight:500}}}));var ea=function(e){var t=e.service,a=Qt();return Object(m.jsxs)($e.a,{elevation:0,className:a.card,children:[Object(m.jsx)(Ke.a,{children:Object(m.jsx)(Xt.a,{className:a.root,children:t["Library notification"]&&""!==t["Library notification"]?t["Library notification"]:""})}),Object(m.jsx)(Ke.a,{className:a.cardHeader,children:t.Services?t.Services.map((function(e,n){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{color:"primary",className:a.service,variant:"body2",children:e}),n!==t.Services.length-1?Object(m.jsx)("span",{className:a.bullet,children:" \u2022 "}):null]})})):null})]})},ta=a(53),aa={InstagramIcon:Vt.a,FacebookIcon:Jt.a,TwitterIcon:$t.a},na={FaceIcon:ht.a,GroupIcon:xt.a,ComputerIcon:vt.a,DescriptionIcon:kt.a,DirectionsBusIcon:$.a,EventIcon:Nt.a,ExploreIcon:Lt.a,FindInPageIcon:Tt.a,SpeakerTwoTone:Ct.a,HomeIcon:At.a,MicIcon:Bt.a,OpenInBrowserIcon:tt.a,PaymentIcon:Ft.a,TabletMacIcon:zt.a,WifiIcon:Et.a},ra=Object(B.a)((function(e){return{avatar:{color:"#fff",backgroundColor:jt.a[500]},bold:{fontWeight:e.typography.fontWeightBold},card:{border:"1px solid",borderColor:e.palette.outline.main},cardTitle:{fontWeight:e.typography.fontWeightBold,fontSize:"1rem"},cardSubTitle:{fontSize:"1rem"},header:{textAlign:"center"},root:{paddingTop:e.spacing(2)},social:{display:"flex",alignItems:"center",justifyContent:"center"},gridContainer:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},linkText:{columnWidth:"16em"},columnLink:{verticalAlign:"middle",display:"inline-flex",padding:e.spacing(1)},columnLinkIcon:{marginRight:e.spacing(1)}}}));var ca=function(){var e=y(),t=Object(I.a)(e,1)[0].service,a=ra();return Object(m.jsx)("div",{className:a.root,children:t&&Object.keys(t).length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(He.a,{className:a.header,component:"h2",variant:"h4",gutterBottom:!0,children:["Your library service is ",Object(m.jsx)("span",{className:a.bold,children:t.Name})]}),Object(m.jsx)("div",{className:a.social,children:Object(m.jsx)(ut.a,{size:"large",color:"secondary","aria-label":"Links to social media",children:ta.services_text.social.filter((function(e){return e.field in t})).map((function(e,a){var n=aa[e.icon];return Object(m.jsx)(F.a,{variant:"text",color:"primary",target:"_blank",rel:"noopener",href:e.url+t[e.field],title:e.title,startIcon:Object(m.jsx)(n,{}),children:e.title},"icn_social_"+a)}))})}),Object(m.jsxs)(Ye.a,{container:!0,spacing:3,className:a.gridContainer,children:[t["Library notification"]&&""!==t["Library notification"]&&"\n"!==t["Library notification"]?Object(m.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,children:Object(m.jsx)(ea,{service:t})}):null,t["Android app URL"]||t["iOS app URL"]?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,children:Object(m.jsxs)($e.a,{elevation:0,className:a.card,children:[Object(m.jsx)(bt.a,{avatar:Object(m.jsx)(dt.a,{className:a.avatar,children:Object(m.jsx)(Ut.a,{})}),title:"Mobile application",titleTypographyProps:{className:a.cardTitle},subheader:"Use the library on your phone",subheaderTypographyProps:{className:a.cardSubTitle}}),Object(m.jsxs)(qe.a,{disableSpacing:!0,children:[t["Android app URL"]?Object(m.jsx)(F.a,{size:"large",color:"primary",className:a.socialIcon,target:"_blank",rel:"noopener",href:t["Android app URL"],title:"App for Android",startIcon:Object(m.jsx)(gt.a,{}),children:"Android app"}):null,t["iOS app URL"]?Object(m.jsx)(F.a,{size:"large",color:"primary",className:a.socialIcon,target:"_blank",rel:"noopener",href:t["iOS app URL"],title:"App for iOS",startIcon:Object(m.jsx)(Kt.a,{}),children:"iOS app"}):null]})]})})}):null,ta.services_text.library_service.filter((function(e){return e.field in t})).map((function(e,n){var r=na[e.icon];return Object(m.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,children:Object(m.jsxs)($e.a,{elevation:0,className:a.card,children:[Object(m.jsx)(bt.a,{avatar:Object(m.jsx)(dt.a,{className:a.avatar,children:Object(m.jsx)(r,{})}),title:e.title.replace("[service]",t.Name),titleTypographyProps:{className:a.cardTitle},subheader:e.description,subheaderTypographyProps:{className:a.cardSubTitle}}),Object(m.jsx)(qe.a,{disableSpacing:!0,children:Object(m.jsx)(F.a,{size:"large",color:"primary",startIcon:Object(m.jsx)(tt.a,{}),target:"_blank",rel:"noopener",href:t[e.field],children:e.link_text})})]})},"grd_service_"+n)}))]}),Object(m.jsx)(He.a,{component:"p",className:a.linkText,children:ta.services_text.service_links.filter((function(e){return e.field in t})).map((function(e,n){var r=na[e.icon];return Object(m.jsxs)(He.a,{component:"span",className:a.columnLink,children:[Object(m.jsx)(r,{color:"secondary",className:a.columnLinkIcon}),Object(m.jsx)(Ee.a,{target:"_blank",rel:"noopener",href:t[e.field],variant:"subtitle2",children:e.text},"typ_link_"+n),Object(m.jsx)("br",{})]},"typ_links_"+n)}))})]}):null})},ia=a(287),oa=a(151),sa=a.n(oa),la=Object(B.a)((function(e){return{button:{marginRight:e.spacing(1)},chip:{marginRight:e.spacing(1)}}}));var da=Object(P.g)((function(e){var t=x(),a=Object(I.a)(t,1)[0].services,n=y(),c=Object(I.a)(n,2),i=c[0].service,o=c[1],s=N(),l=Object(I.a)(s,2);Object(T.a)(l[0]),l[1];var d=Object(r.useState)(null),u=Object(I.a)(d,2),b=u[0],j=u[1],p=function(){return j(null)},h=la();return Object(m.jsxs)(m.Fragment,{children:[0===Object.keys(i).length?Object(m.jsx)(E.a,{title:"Choose library service",children:Object(m.jsx)(F.a,{size:"large",color:"primary",className:h.button,onClick:function(e){return t=e.currentTarget,j(t);var t},startIcon:Object(m.jsx)(sa.a,{}),children:"Choose service"})}):Object(m.jsx)(ia.a,{size:"medium",className:h.chip,color:"primary",onDelete:function(){o({type:"ClearAll"}),Fe(e.history)},label:i.Name}),Object(m.jsx)(me.a,{id:"menu-library-service",anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:function(){return p()},children:a.filter((function(e){return e&&e.Name})).sort((function(e,t){return e.Name.localeCompare(t.Name)})).map((function(t){return Object(m.jsx)(ge.a,{onClick:function(){return function(t){o({type:"SetService",service:t}),Me(e.history,t.systemName),p()}(t)},children:t.Name},"mnu_itm_org_"+t.Code)}))})]})})),ua=Object(B.a)((function(e){return{search:{alignContent:"center",textAlign:"center",display:"table",marginLeft:"auto",marginRight:"auto",marginBottom:"10px"},title:{textAlign:"center"}}}));var ba=function(){var e=ua();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{component:"h1",variant:"h3",color:"secondary",className:e.title,gutterBottom:!0,children:"Your library service"}),Object(m.jsx)("div",{className:e.search,children:Object(m.jsx)(Ue,{settings:!1})}),Object(m.jsx)(He.a,{component:"p",variant:"body1",className:e.title,gutterBottom:!0,children:"Use this search to find the library service in your area"}),Object(m.jsx)("div",{className:e.search,children:Object(m.jsx)(da,{})}),Object(m.jsxs)(Ye.a,{container:!0,spacing:1,children:[Object(m.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:Object(m.jsx)(nt,{})}),Object(m.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:Object(m.jsx)(lt,{})})]}),Object(m.jsx)(ca,{})]})},ja=a(269),pa=a(280),ha=a(152),ma=a.n(ha),ga=a(153),fa=a.n(ga),xa=a(283),Oa=a(53),va=function(){var e=Object(_.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oa.servicesApi,e.next=3,Se.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=7;break}return a.data.forEach((function(e){e.systemName=wa(e.Name)})),e.abrupt("return",a.data);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ya=function(){var e=Object(_.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oa.videoApi,e.next=3,Se.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ka=function(){var e=Object(_.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oa.blogsApi,e.next=3,Se.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wa=function(e){return e.split(", ").reverse().join(" ").replace(/[. ,:-]+/g,"-").toLowerCase()},Na=a(53),Sa=Object(B.a)((function(e){return{title:{textAlign:"center"},card:{position:"relative"},media:{height:150},overlay:{color:"#ffffff",position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%"},playIcon:{color:"#2e7d32"},rating:{marginLeft:e.spacing(1)},video:{maxWidth:"100%"}}}));var La=function(){var e=this,t=x(),a=Object(I.a)(t,1)[0],n=a.videos,i=a.services,o=Sa(),s=Object(r.useState)(!1),l=Object(I.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)(""),j=Object(I.a)(b,2),p=j[0],h=j[1],g=function(e){u(!0),h("https://www.youtube.com/embed/"+e.replace("yt:video:",""))},f=n.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{}),O={};return i.forEach((function(e){e["YouTube ID"]&&(O[e["YouTube ID"]]=e)})),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{component:"h1",variant:"h3",color:"secondary",className:o.title,children:"Library TV"}),Object(m.jsx)(He.a,{component:"p",variant:"body1",className:o.title,children:"Watch videos published by library services on YouTube"}),Object.keys(f).map((function(t,a){return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(he.a,{component:"div",disableSticky:!0,children:ot()(t,"YYYY-MM-DD").calendar(null,Na.calendarDisplay)}),Object(m.jsx)(Ye.a,{container:!0,spacing:3,children:f[t].map((function(t,a){var n=t.custom_elements,r=n.filter((function(e){return"media:group"===Object.keys(e)[0]}))[0]["media:group"],c=r.filter((function(e){return"media:thumbnail"===Object.keys(e)[0]}))[0]["media:thumbnail"],i=r.filter((function(e){return"media:community"===Object.keys(e)[0]}))[0]["media:community"].filter((function(e){return"media:starrating"===Object.keys(e)[0]}))[0]["media:starrating"],s=i._attr.average,l=n.filter((function(e){return"yt:channelid"===Object.keys(e)[0]}))[0]["yt:channelid"],d=O[l],u=function(e){var t=Oa.youTubeUrl,a={UC:["channel/","Channel"],PL:["playlist/","Playlist"]}[e.substring(0,2)];return{url:t+(a?a[0]:"user/")+e,type:a?a[1]:"Account"}}(l);return Object(m.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:Object(m.jsxs)($e.a,{variant:"outlined",className:o.card,children:[Object(m.jsx)(ja.a,{className:o.media,image:c._attr.url,title:t.title}),Object(m.jsx)(Ke.a,{className:o.overlay,children:Object(m.jsx)(He.a,{variant:"caption",component:"p",children:t.title})}),Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(F.a,{size:"small",className:o.playIcon,startIcon:Object(m.jsx)(ma.a,{}),onClick:g.bind(e,t.guid),children:"Play"}),d?Object(m.jsx)(F.a,{size:"small",color:"secondary",startIcon:Object(m.jsx)(fa.a,{}),target:"_blank",rel:"noopener",href:u.url,children:d.Name}):null,i&&s&&parseFloat(s)>0?Object(m.jsx)(E.a,{title:s?"Rated "+s:"No rating","aria-label":"add",children:Object(m.jsx)("span",{children:Object(m.jsx)(xa.a,{size:"small",className:o.rating,name:"read-only",value:parseFloat(s),precision:.5,readOnly:!0})})}):null]})]})},"grd_vids_"+a)}))})]},"frg_dates_"+a)})),Object(m.jsx)(pa.a,{maxWidth:"sm",onClose:function(){u(!1),h("")},"aria-labelledby":"YouTube dialog",open:d,children:Object(m.jsx)("iframe",{title:"Video",className:o.video,width:"560",height:"315",src:p,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})})]})},_a=a(53),Ta=Object(B.a)((function(e){return{columnLink:{verticalAlign:"middle",display:"inline-flex"},header:{textAlign:"center"},linkText:{columnWidth:"16em"},columnLinkIcon:{marginRight:e.spacing(1)}}}));var Ia=function(){var e=x(),t=Object(I.a)(e,1)[0].blogs,a=Ta(),n=t.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{component:"h3",variant:"h6",className:a.header,gutterBottom:!0,children:"Recent blogs"}),Object(m.jsx)(He.a,{component:"p",className:a.linkText,children:Object.keys(n).slice(0,3).map((function(e,t){return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(he.a,{disableSticky:!0,component:"span",className:a.columnLink,children:ot()(e,"YYYY-MM-DD").calendar(null,_a.calendarDisplay)}),Object(m.jsx)("br",{}),n[e].map((function(e,t){return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsxs)(He.a,{component:"span",className:a.columnLink,children:[Object(m.jsx)(kt.a,{color:"secondary",className:a.columnLinkIcon}),Object(m.jsx)(Ee.a,{target:"_blank",rel:"noopener",href:e.url,variant:"subtitle2",children:e.author+". "+e.title},"typ_link_"+t)]}),Object(m.jsx)("br",{})]},"typ_links_"+t)}))]},"frg_blogdates_"+t)}))})]})},Ca=Object(B.a)((function(e){return{header:{textAlign:"center"},subtitle:{textAlign:"center"}}}));var Pa=function(){var e=Ca();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{component:"h1",variant:"h3",color:"secondary",className:e.header,children:"Read"}),Object(m.jsx)(He.a,{component:"p",variant:"body1",className:e.subtitle,gutterBottom:!0,children:"The things library services are writing"}),Object(m.jsx)(Ia,{})]})},Aa=a(53),Ra=Object(B.a)((function(e){return{columnLink:{verticalAlign:"middle",display:"inline-flex"},header:{textAlign:"center"},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(2)},linkText:{columnWidth:"16em"},columnLinkIcon:{marginRight:e.spacing(1)}}}));var Ba=function(){var e=x(),t=Object(I.a)(e,2),a=t[0].services,n=(t[1],Ra());return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{component:"h3",variant:"h6",className:n.header,gutterBottom:!0,children:"Library podcasts"}),Object(m.jsx)(He.a,{component:"p",className:n.linkText,children:a.filter((function(e){return e["Podcast URL"]&&""!==e["Podcast URL"]})).map((function(e,t){return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsxs)(He.a,{component:"span",className:n.columnLink,children:[Object(m.jsx)(Bt.a,{color:"secondary",className:n.columnLinkIcon}),Object(m.jsx)(Ee.a,{rel:"noopener",target:"_blank",href:e[Aa.podcasts.url_field],variant:"subtitle2",children:e[Aa.podcasts.service_name_field]+". "+e[Aa.podcasts.podcast_name_field]})]}),Object(m.jsx)("br",{})]},"frg_podcasts_"+t)}))})]})},Ma=Object(B.a)((function(e){return{header:{textAlign:"center"},subtitle:{textAlign:"center"}}}));var Fa=function(){var e=Ma();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{component:"h1",variant:"h3",color:"secondary",className:e.header,children:"Listen"}),Object(m.jsx)(He.a,{component:"p",variant:"body1",className:e.subtitle,gutterBottom:!0,children:"Hear what libraries are talking about"}),Object(m.jsx)(Ba,{})]})},Da=a(157),Ua=a(6),Wa=Object(B.a)((function(e){return{listItem:{marginTop:e.spacing(1)},root:{"& table":{display:"block",wordBreak:"normal",width:"100%",overflowX:"auto",WebkitOverflowScrolling:"touch",borderCollapse:"collapse",marginBottom:"16px",borderSpacing:0,overflow:"hidden","& .prop-name":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace'},"& .required":{color:"light"===e.palette.type?"#006500":"#a5ffa5"},"& .prop-type":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace',color:"light"===e.palette.type?"#932981":"#ffb6ec"},"& .prop-default":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace',borderBottom:"1px dotted ".concat(e.palette.divider)}},"& td":Object(s.a)(Object(s.a)({},e.typography.body2),{},{borderBottom:"1px solid ".concat(e.palette.divider),padding:16,color:e.palette.text.primary}),"& th":{fontSize:14,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium,color:e.palette.text.primary,whiteSpace:"pre",borderBottom:"1px solid ".concat(e.palette.divider),padding:16}}}})),za={overrides:{h1:{component:He.a,props:{gutterBottom:!0,variant:"h4",color:"secondary"}},h2:{component:He.a,props:{gutterBottom:!0,variant:"h5",color:"secondary"}},h3:{component:He.a,props:{gutterBottom:!0,variant:"h6",color:"secondary"}},h4:{component:He.a,props:{gutterBottom:!0,variant:"h6",paragraph:!0,color:"secondary"}},p:{component:He.a,props:{paragraph:!0,color:"secondary"}},a:{component:Ee.a},li:{component:Object(Ua.a)(Wa)((function(e){var t=e.classes,a=Object(Da.a)(e,["classes"]);return Object(m.jsx)("li",{className:t.listItem,children:Object(m.jsx)(He.a,Object(s.a)({component:"span"},a))})}))}}};var Ya=function(e){var t=e.page,a=Object(r.useState)(""),n=Object(I.a)(a,2),c=n[0],i=n[1],o=Wa();return Object(r.useEffect)((function(){function e(){return(e=Object(_.a)(L.a.mark((function e(){var a,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:return a=e.sent,e.next=5,a.text();case 5:n=e.sent,i(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(m.jsx)(Xt.a,Object(s.a)(Object(s.a)({className:o.root,options:za},e),{},{children:c}))},Ea=a(275),Ha=a(281);function Va(e){return Object(m.jsx)(Ea.a,Object(s.a)({elevation:0,variant:"filled"},e))}var Ga=function(){var e=N(),t=Object(I.a)(e,2),a=t[0],n=a.notificationOpen,r=a.notificationSeverity,c=a.notificationMessage,i=t[1],o=function(){i({type:"CloseNotification"})};return Object(m.jsx)(Ha.a,{open:n,autoHideDuration:4e3,onClose:o,children:Object(m.jsx)(Va,{onClose:o,severity:r,children:c})})},Ja=a.p+"static/media/about.5b9b36e1.md",Za=a.p+"static/media/accessibility.e860c768.md",$a=a.p+"static/media/data.c4f47691.md",qa=a.p+"static/media/privacy.d85474c9.md",Ka=Object(B.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1}}}));var Xa=function(){var e=N(),t=Object(I.a)(e,2),a=t[0],n=a.loadingServices,c=a.loadingVideos,i=a.loadingBlogs,o=a.loadingPostcode,s=t[1],l=x(),d=Object(I.a)(l,2);Object(T.a)(d[0]);var u=d[1],b=y(),j=Object(I.a)(b,2);Object(T.a)(j[0]);var p=j[1];Object(r.useEffect)((function(){function e(){return(e=Object(_.a)(L.a.mark((function e(){var t,a,n,r,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"ToggleLoadingServices"}),e.next=3,va();case 3:t=e.sent,a={},t.forEach((function(e){a[e.systemName]=e})),u({type:"AddServices",services:t}),s({type:"ToggleLoadingServices"}),n=new URLSearchParams(window.location.search),(r=n.get("service"))&&a[r]&&(c=a[r],p({type:"SetService",service:c}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(_.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"ToggleLoadingVideos"}),e.next=3,ya();case 3:t=e.sent,u({type:"AddVideos",videos:t}),s({type:"ToggleLoadingVideos"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(_.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"ToggleLoadingBlogs"}),e.next=3,ka();case 3:t=e.sent,u({type:"AddBlogs",blogs:t}),s({type:"ToggleLoadingBlogs"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),function(){a.apply(this,arguments)}()}),[u,s,p]);var h=Ka(),g=n||c||i||o;return Object(m.jsx)(C.a,{children:Object(m.jsxs)("div",{className:h.root,children:[Object(m.jsx)(ze,{site:1,loading:g}),g?Object(m.jsx)(R.a,{variant:"buffer",value:0,valueBuffer:0,color:"secondary"}):null,Object(m.jsx)(A.a,{maxWidth:"lg",children:Object(m.jsx)("main",{className:h.content,children:Object(m.jsxs)(P.c,{children:[Object(m.jsx)(P.a,{path:"/",exact:!0,render:function(){return Object(m.jsx)(ba,{})}}),Object(m.jsx)(P.a,{path:"/watch",exact:!0,render:function(){return Object(m.jsx)(La,{})}}),Object(m.jsx)(P.a,{path:"/read",exact:!0,render:function(){return Object(m.jsx)(Pa,{})}}),Object(m.jsx)(P.a,{path:"/listen",exact:!0,render:function(){return Object(m.jsx)(Fa,{})}}),Object(m.jsx)(P.a,{path:"/about",exact:!0,render:function(){return Object(m.jsx)(Ya,{page:Ja})}}),Object(m.jsx)(P.a,{path:"/accessibility",exact:!0,render:function(){return Object(m.jsx)(Ya,{page:Za})}}),Object(m.jsx)(P.a,{path:"/data",exact:!0,render:function(){return Object(m.jsx)(Ya,{page:$a})}}),Object(m.jsx)(P.a,{path:"/privacy",exact:!0,render:function(){return Object(m.jsx)(Ya,{page:qa})}}),Object(m.jsx)(P.a,{path:["/http:","/https:"],component:function(e){return window.location.replace(e.location.pathname.substr(1)),null}}),Object(m.jsx)(P.a,{component:function(e){e.location;return Object(m.jsx)("div",{children:Object(m.jsx)("h2",{children:"Sorry! That page was not found"})})}})]})})}),Object(m.jsx)(A.a,{maxWidth:"lg",children:Object(m.jsx)(Ze,{})}),Object(m.jsx)(Ga,{})]})})},Qa={services:[],videos:[],blogs:[]},en=function(e,t){switch(t.type){case"AddServices":return Object(s.a)(Object(s.a)({},e),{},{services:t.services});case"AddVideos":return Object(s.a)(Object(s.a)({},e),{},{videos:t.videos});case"AddBlogs":return Object(s.a)(Object(s.a)({},e),{},{blogs:t.blogs});default:return e}},tn={searchPostcode:"",searchType:"",searchDistance:1609,searchPosition:[],service:{},currentServiceSystemName:null,library:null,mobileLibrary:null},an=function(e,t){switch(t.type){case"SetSearchDistance":return Object(s.a)(Object(s.a)({},e),{},{searchDistance:t.searchDistance});case"SetPostcodeSearch":return Object(s.a)(Object(s.a)({},e),{},{searchPostcode:t.searchPostcode,searchPosition:t.searchPosition,searchType:"postcode",currentServiceSystemName:null});case"SetService":return Object(s.a)(Object(s.a)({},e),{},{service:t.service,currentServiceSystemName:t.service.systemName});case"SetLocation":return Object(s.a)(Object(s.a)({},e),{},{searchPosition:t.searchPosition});case"SetLibrary":return Object(s.a)(Object(s.a)({},e),{},{library:t.library});case"SetMobileLibrary":return Object(s.a)(Object(s.a)({},e),{},{mobileLibrary:t.mobileLibrary});case"ClearAll":return Object(s.a)(Object(s.a)({},e),{},{searchPostcode:"",searchPosition:[],searchType:"",service:{},currentServiceSystemName:null,library:null,mobileLibrary:null});default:return e}},nn={notificationOpen:!1,notificationSeverity:"",notificationMessage:"",loadingPostcode:!1,loadingLocation:!1,loadingServices:!1,loadingVideos:!1,loadingBlogs:!1},rn=function(e,t){switch(t.type){case"ShowNotification":return Object(s.a)(Object(s.a)({},e),{},{notificationOpen:!0,notificationSeverity:t.notificationSeverity,notificationMessage:t.notificationMessage});case"CloseNotification":return Object(s.a)(Object(s.a)({},e),{},{notificationOpen:!1});case"SetPostcodeSearch":return Object(s.a)(Object(s.a)({},e),{},{loadingPostcode:!1,mapPosition:t.mapPosition,mapZoom:[13]});case"ToggleLoadingPostcode":return Object(s.a)(Object(s.a)({},e),{},{loadingPostcode:!e.loadingPostcode});case"ToggleLoadingLocation":return Object(s.a)(Object(s.a)({},e),{},{loadingLocation:!e.loadingLocation});case"ToggleLoadingServices":return Object(s.a)(Object(s.a)({},e),{},{loadingServices:!e.loadingServices});case"ToggleLoadingVideos":return Object(s.a)(Object(s.a)({},e),{},{loadingVideos:!e.loadingVideos});case"ToggleLoadingBlogs":return Object(s.a)(Object(s.a)({},e),{},{loadingBlogs:!e.loadingBlogs});default:return e}},cn=Object(p.a)({palette:{primary:{main:u.a[800]},secondary:{main:j.a[600]},outline:{main:j.a[50]}},overrides:{MuiButton:{text:{textTransform:"none"},root:{textTransform:"none"}},MuiDivider:{root:{backgroundColor:j.a[50]}},MuiTypography:{button:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}});var on=function(){return Object(m.jsx)(f,{initialState:Qa,reducer:en,children:Object(m.jsx)(v,{initialState:tn,reducer:an,children:Object(m.jsx)(w,{initialState:nn,reducer:rn,children:Object(m.jsxs)(h.a,{theme:cn,children:[Object(m.jsx)(l.a,{}),Object(m.jsx)(Xa,{})]})})})})};a(204);o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(on,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e){e.exports=JSON.parse('{"postcodeApi":"https://api-geography.librarydata.uk/rest/postcodes/","videoApi":"https://api.librarydata.uk/services/airtable/feeds/youtube.json","blogsApi":"https://api.librarydata.uk/services/airtable/feeds/blogs.json","servicesApi":"https://api.librarydata.uk/services/airtable","libraryApi":"https://api.librarydata.uk/libraries/nearest","mobileLibraryApi":"https://api.mobilelibraries.org/api/stops/nearest","youTubeUrl":"https://www.youtube.com/","calendarDisplay":{"lastDay":"[From Yesterday]","sameDay":"[New Today]","nextDay":"[Tomorrow]","lastWeek":"[Last] dddd","nextWeek":"dddd","sameElse":"L"},"services_text":{"social":[{"field":"Instagram name","icon":"InstagramIcon","url":"https://www.instagram.com/","title":"Instagram","colour":"#405DE6"},{"field":"Facebook page name","icon":"FacebookIcon","url":"https://www.facebook.com/","title":"Facebook","colour":"#4267B2"},{"field":"Twitter handle","icon":"TwitterIcon","url":"https://twitter.com/","title":"Twitter","colour":"#1DA1F2"}],"library_service":[{"field":"Service URL","title":"Visit [service] website","description":"View all information about your library service","link_text":"Go to the website","icon":"OpenInBrowserIcon"},{"field":"Catalogue URL","title":"Browse the catalogue","description":"Find an item to borrow or reserve","link_text":"Online catalogue","icon":"FindInPageIcon"},{"field":"New member URL","title":"Join [service] libraries","description":"Start having fun with your library","link_text":"Join now","icon":"FaceIcon"},{"field":"Childrens service URL","title":"Information for children","description":"Libraries for everyone","link_text":"See children\'s services","icon":"GroupIcon"}],"service_links":[{"field":"Libraries URL","text":"Find your local library","icon":"FindInPageIcon"},{"field":"Ebook URL","text":"Read ebooks on your devices","icon":"TabletMacIcon"},{"field":"Audiobook URL","text":"Listen to audiobooks on your devices","icon":"SpeakerTwoTone"},{"field":"Mobile libraries URL","text":"Discover when the mobile library visits","icon":"DirectionsBusIcon"},{"field":"Home service URL","text":"Check if the library can come to your home","icon":"HomeIcon"},{"field":"Events URL","text":"See events in your libraries","icon":"EventIcon"},{"field":"Computer access URL","text":"Book a computer in the library","icon":"ComputerIcon"},{"field":"Wifi access URL","text":"Use Wifi in the library","icon":"WifiIcon"},{"field":"Fees and charges URL","text":"Understand fees and charges for your library service","icon":"PaymentIcon"},{"field":"News or Blog URL","text":"Read latest library news","icon":"DescriptionIcon"},{"field":"Podcast URL","text":"Listen to a library Podcast","icon":"MicIcon"}]},"podcasts":{"service_name_field":"Name","podcast_name_field":"Podcast name","url_field":"Podcast URL"}}')}},[[205,1,2]]]);
//# sourceMappingURL=main.2fa94a69.chunk.js.map
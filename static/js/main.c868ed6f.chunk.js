(this["webpackJsonplibraries-at-home"]=this["webpackJsonplibraries-at-home"]||[]).push([[0],{157:function(e,t,a){e.exports=a.p+"static/media/about.1ea0fd5a.md"},158:function(e,t,a){e.exports=a.p+"static/media/accessibility.a43f53e5.md"},159:function(e,t,a){e.exports=a.p+"static/media/data.e34f2471.md"},160:function(e,t,a){e.exports=a.p+"static/media/privacy.a013c74b.md"},179:function(e,t,a){e.exports=a(209)},208:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getPosition",(function(){return He})),a.d(n,"getCurrentPosition",(function(){return Ge})),a.d(n,"getCurrentPostcode",(function(){return Je})),a.d(n,"getPostcode",(function(){return Ze})),a.d(n,"getServiceDataFromPostcode",(function(){return Ke})),a.d(n,"getNearestLibrary",(function(){return $e})),a.d(n,"getNearestMobileLibrary",(function(){return qe})),a.d(n,"validatePostcode",(function(){return Xe}));var r=a(0),i=a.n(r),o=a(18),c=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(10),s=a(277),u=a(161),m=a.n(u),p=a(92),d=a.n(p),b=a(162),g=a(276),f=Object(r.createContext)(),h=function(e){var t=e.reducer,a=e.initialState,n=e.children;return i.a.createElement(f.Provider,{value:Object(r.useReducer)(t,a)},n)},v=function(){return Object(r.useContext)(f)},y=Object(r.createContext)(),E=function(e){var t=e.reducer,a=e.initialState,n=e.children;return i.a.createElement(y.Provider,{value:Object(r.useReducer)(t,a)},n)},x=function(){return Object(r.useContext)(y)},k=Object(r.createContext)(),O=function(e){var t=e.reducer,a=e.initialState,n=e.children;return i.a.createElement(k.Provider,{value:Object(r.useReducer)(t,a)},n)},j=function(){return Object(r.useContext)(k)},w=a(16),N=a.n(w),L=a(20),S=a(61),C=a(9),_=a(41),I=a(17),T=a(264),P=a(275),B=a(253),R=a(74),A=a(257),M=a(287),F=a(258),D=a(281),W=a(58),U=a(124),z=a.n(U),Y=a(125),V=a.n(Y),H=a(56),G=a(256),J=a(280),Z=a(76),K=Object(B.a)((function(e){return{alert:{marginBottom:e.spacing(1)},chip:{margin:e.spacing(.5),backgroundColor:"white"}}}));var $=function(e){var t=e.service,a=K();return i.a.createElement(J.a,{severity:"warning",className:a.alert},i.a.createElement(G.a,null,t.Name),t.Services?t.Services.map((function(e,t){return i.a.createElement(M.a,{key:t,variant:"outlined",size:"small",className:a.chip,label:e})})):null,i.a.createElement(Z.a,{className:a.root},t["Library notification"]&&""!==t["Library notification"]?t["Library notification"]:""))},q=Object(B.a)((function(e){return{chip:{margin:e.spacing(1)},filters:{alignContent:"center",textAlign:"center",display:"table",marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(1)},gridContainer:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},header:{textAlign:"center"},subtitle:{textAlign:"center"},inputInput:{paddingTop:e.spacing(),paddingRight:e.spacing(),paddingBottom:e.spacing(),paddingLeft:e.spacing(2),fontWeight:e.typography.fontWeightBold},search:{position:"relative",border:"1px solid #E0E0E0",borderColor:e.palette.outline.main,borderRadius:e.shape.borderRadius,backgroundColor:Object(H.fade)(e.palette.common.white,.8),"&:hover":{backgroundColor:Object(H.fade)(e.palette.common.white,.9)},marginLeft:0,marginRight:e.spacing(),display:"flex",maxWidth:240}}}));var X=function(){var e=v(),t=Object(C.a)(e,2),a=t[0].services,n=(t[1],Object(r.useState)("")),o=Object(C.a)(n,2),c=o[0],s=o[1],u=Object(r.useState)({"Click and collect":!1,"Computer use":!1,"Home library service":!1,"Mobile library":!1,Browsing:!1}),m=Object(C.a)(u,2),p=m[0],d=m[1],b=q();return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{component:"h1",variant:"h3",color:"secondary",className:b.header},"Alerts"),i.a.createElement(W.a,{component:"p",variant:"body1",className:b.subtitle,gutterBottom:!0},"Current alerts for UK library services"),i.a.createElement("div",{className:b.filters},i.a.createElement("div",{className:b.search},i.a.createElement(D.a,{placeholder:"Search alerts",classes:{input:b.inputInput},value:c,onChange:function(e){return s(e.target.value)},inputProps:{"aria-label":"filter alerts"}}))),i.a.createElement("div",{className:b.filters},Object.keys(p).map((function(e,t){return i.a.createElement(A.a,{key:"chp_"+t,color:"primary",badgeContent:a.filter((function(t){return t.Services&&-1!==t.Services.indexOf(e)})).length,max:250,className:b.chip},i.a.createElement(M.a,{color:p[e]?"primary":"default",label:e,onClick:function(){!function(e){d(Object(l.a)(Object(l.a)({},p),{},Object(R.a)({},e,!p[e])))}(e)},icon:p[e]?i.a.createElement(z.a,null):i.a.createElement(V.a,null)}))}))),i.a.createElement(F.a,{container:!0,spacing:3,className:b.gridContainer},a.sort((function(e,t){return e.Name.localeCompare(t.Name)})).filter((function(e){return e["Library notification"]&&""!==e["Library notification"]&&"\n"!==e["Library notification"]})).filter((function(e){return""===c||-1!==e.Name.toLowerCase().indexOf(c.toLowerCase())||-1!==e["Library notification"].toLowerCase().indexOf(c.toLowerCase())})).filter((function(e){var t=!0;return Object.keys(p).forEach((function(a){!p[a]||e.Services&&-1!==e.Services.indexOf(a)||(t=!1)})),t})).map((function(e,t){return i.a.createElement(F.a,{key:"al_"+t,item:!0,xs:12,sm:6,md:4,lg:4,xl:4},i.a.createElement($,{service:e}))}))))},Q=a(266),ee=a(210),te=a(282),ae=a(255),ne=a(267),re=a(279),ie=a(265),oe=a(288),ce=a(132),le=a.n(ce),se=a(135),ue=a.n(se),me=a(65),pe=a.n(me),de=a(101),be=a.n(de),ge=a(133),fe=a.n(ge),he=a(130),ve=a.n(he),ye=a(91),Ee=a.n(ye),xe=a(131),ke=a.n(xe),Oe=a(84),je=a.n(Oe),we=a(90),Ne=a.n(we),Le=a(134),Se=a.n(Le),Ce=a(163),_e=a(278),Ie=a(261),Te=a(262),Pe=a(263),Be=a(284),Re=a(291),Ae=a(127),Me=a.n(Ae),Fe=a(128),De=a.n(Fe),We=a(129),Ue=a.n(We),ze=a(42),Ye=a.n(ze),Ve=a(52),He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,a){navigator.geolocation.getCurrentPosition(t,a,e)}))},Ge=function(){var e=Object(L.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e.next=3,He(t);case 3:return a=e.sent,e.abrupt("return",[a.coords.longitude,a.coords.latitude]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Object(L.a)(N.a.mark((function e(t,a){var n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.postcodes.io/postcodes?lon=".concat(t,"&lat=").concat(a),e.prev=1,e.next=4,Ye.a.get(n);case 4:if(200!==(r=e.sent).status){e.next=9;break}if(!((i=r.data.result).length>0)){e.next=9;break}return e.abrupt("return",i[0].postcode);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(L.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.a.get(Ve.postcodeApi+t);case 2:return a=e.sent,e.abrupt("return",{location:[a.data.longitude,a.data.latitude],library_service_name:a.data.library_service_name,library_service:a.data.library_service});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(L.a)(N.a.mark((function e(t,a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t);case 2:if(n=e.sent,!((r=a.filter((function(e){return e.Code===n.library_service}))).length>0)){e.next=6;break}return e.abrupt("return",{service:r[0],location:n.location});case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$e=function(){var e=Object(L.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.a.get(Ve.libraryApi+"?latitude="+t[1]+"&longitude="+t[0]);case 2:return a=e.sent,e.abrupt("return",a&&a.data&&a.data.length>0?a.data[0]:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(L.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.a.get(Ve.mobileLibraryApi+"?latitude="+t[1]+"&longitude="+t[0]);case 2:return a=e.sent,e.abrupt("return",a&&a.data&&a.data.length>0?a.data[0]:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(e){return/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/.test(e.trim())},Qe=function(e,t){var a=new URLSearchParams(window.location.search);a.set("service",t),e.push(window.location.pathname+"?"+a.toString())},et=function(e){new URLSearchParams(window.location.search).delete("service"),e.push(window.location.pathname)},tt=Object(B.a)((function(e){return{grow:{flexGrow:1},iconButton:{padding:e.spacing()},iconProgress:{margin:e.spacing()},inputInput:{paddingTop:e.spacing(),paddingRight:e.spacing(),paddingBottom:e.spacing(),paddingLeft:e.spacing(2),fontWeight:e.typography.fontWeightBold},search:{position:"relative",border:"1px solid #E0E0E0",borderColor:e.palette.outline.main,borderRadius:e.shape.borderRadius,backgroundColor:Object(H.fade)(e.palette.common.white,.8),"&:hover":{backgroundColor:Object(H.fade)(e.palette.common.white,.9)},marginLeft:0,marginRight:e.spacing(),display:"flex",maxWidth:240}}}));var at=Object(I.f)((function(e){var t=e.settings,a=v(),o=Object(C.a)(a,1)[0].services,c=x(),l=Object(C.a)(c,2),s=l[0],u=s.searchType,m=s.searchPostcode,p=(s.searchDistance,s.searchPosition),d=l[1],b=j(),g=Object(C.a)(b,2),f=g[0],h=f.loadingPostcode,y=f.loadingLocation,E=g[1],k=Object(r.useState)(m||""),O=Object(C.a)(k,2),w=O[0],S=O[1],_=Object(r.useState)(null),I=Object(C.a)(_,2),T=I[0],P=I[1],B=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}({searchPostcode:m});Object(r.useEffect)((function(){B&&m!==B.searchPostcode&&S(m)}),[m,B]);var R=function(){var e=Object(L.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=16;break}if(E({type:"ToggleLoadingLocation"}),!(p.length>0)){e.next=6;break}e.t0=p,e.next=9;break;case 6:return e.next=8,Ge();case 8:e.t0=e.sent;case 9:return t=e.t0,d({type:"SetLocation",searchPosition:t}),e.next=13,A(t);case 13:a=e.sent,E({type:"ToggleLoadingLocation"}),a&&""!==a&&W(a);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(L.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=6;break}return e.next=3,Je.apply(n,Object(Ce.a)(t));case 3:return a=e.sent,S(a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){return P(null)},F=function(e){M(),d({type:"SetSearchDistance",searchDistance:e}),"postcode"===u&&W(w)},W=function(){var t=Object(L.a)(N.a.mark((function t(){var a,n,r=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=r.length>0&&void 0!==r[0]?r[0]:w)&&""!==a){t.next=4;break}return E({type:"ShowNotification",notificationMessage:"Please enter a postcode before searching",notificationSeverity:"warning"}),t.abrupt("return");case 4:if(E({type:"ToggleLoadingPostcode"}),E({type:"LoadingPostcode"}),!Xe(a)){t.next=15;break}return t.next=9,Ke(a.trim(),o);case 9:n=t.sent,d({type:"SetPostcodeSearch",searchPostcode:a,searchPosition:n.location}),d({type:"SetService",service:n.service}),Qe(e.history,n.service.systemName),t.next=16;break;case 15:E({type:"ShowNotification",notificationMessage:"We could not find that postcode",notificationSeverity:"error"});case 16:E({type:"ToggleLoadingPostcode"});case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=tt();return i.a.createElement("div",{className:U.search},i.a.createElement(D.a,{placeholder:"Postcode",classes:{input:U.inputInput},value:w,onChange:function(e){return S(e.target.value.toUpperCase())},onKeyDown:function(e){13===e.keyCode&&W()},inputProps:{"aria-label":"search by postcode"}}),"postcode"===u?i.a.createElement(oe.a,{title:"Clear search"},i.a.createElement(ae.a,{"aria-label":"Clear search",className:U.iconButton,onClick:function(){return S(""),d({type:"ClearAll"}),void et(e.history)}},i.a.createElement(Me.a,null))):null,i.a.createElement("div",{className:U.grow}),i.a.createElement(oe.a,{title:"Search by postcode"},h?i.a.createElement(_e.a,{position:"relative",display:"inline-flex",className:U.iconProgress},i.a.createElement(Ie.a,{size:22})):i.a.createElement(ae.a,{"aria-label":"Search",color:"primary",className:U.iconButton,onClick:function(){return W()}},i.a.createElement(je.a,null))),i.a.createElement(Te.a,{orientation:"vertical",flexItem:!0}),i.a.createElement(oe.a,{title:"Use your current location"},y?i.a.createElement(_e.a,{position:"relative",display:"inline-flex",className:U.iconProgress},i.a.createElement(Ie.a,{size:22})):i.a.createElement(ae.a,{"aria-label":"Search by current location",color:"primary",className:U.iconButton,onClick:function(){return R()}},i.a.createElement(De.a,null))),t?i.a.createElement(oe.a,{title:"Change search settings"},i.a.createElement(ae.a,{"aria-label":"Open search settings menu",className:U.iconButton,color:"secondary",onClick:function(e){!function(e){P(e.currentTarget)}(e)}},i.a.createElement(Ue.a,null))):null,i.a.createElement(Be.a,{id:"mnu-settings",anchorEl:T,keepMounted:!0,open:Boolean(T),onClose:function(){return M()}},i.a.createElement(Pe.a,{disableSticky:!0},"Search distance"),i.a.createElement(Re.a,{onClick:function(){return F(1609)}},"1 mile"),i.a.createElement(Re.a,{onClick:function(){return F(4827)}},"3 miles"),i.a.createElement(Re.a,{onClick:function(){return F(8045)}},"5 miles"),i.a.createElement(Re.a,{onClick:function(){return F(16090)}},"10 miles"),i.a.createElement(Re.a,{onClick:function(){return F(32180)}},"20 miles"),i.a.createElement(Re.a,{onClick:function(){return F(80450)}},"50 miles")))})),nt=Object(B.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,position:"relative"},appBarTransparent:{zIndex:e.zIndex.drawer+1,backgroundColor:"rgba(250, 250, 250, 0.8)",position:"relative"},grow:{flexGrow:1},topIcon:{backgroundColor:"rgba(250, 250, 250, 0.8)","&:hover":{backgroundColor:"rgba(250, 250, 250, 0.8)"}},topTitle:{position:"relative",zIndex:e.zIndex.drawer+1}}}));var rt=function(e){var t=e.site,a=x(),n=Object(C.a)(a,1)[0].currentServiceSystemName,o=Object(r.useState)(!1),c=Object(C.a)(o,2),l=c[0],s=c[1],u=Object(r.useState)(t),m=Object(C.a)(u,2),p=m[0],d=m[1],b=Object(I.e)(),g=nt(),f=function(e){return n?e+"?service="+n:e},h=[{title:"Library lab",url:"https://www.librarylab.uk",icon:i.a.createElement(Ne.a,null),links:[{title:"About library lab",short:"Lab",icon:i.a.createElement(Ne.a,null),to:"/"}]},{title:"Libraries at home",url:"https://www.librariesathome.co.uk",icon:i.a.createElement(ve.a,null),links:[{title:"Find service",short:"Find",icon:i.a.createElement(je.a,null),to:f("/")},{title:"Watch library TV",short:"Watch",icon:i.a.createElement(ke.a,null),to:"/watch"},{title:"Read blogs",short:"Read",icon:i.a.createElement(le.a,null),to:"/read"},{title:"Listen podcasts",short:"Listen",icon:i.a.createElement(fe.a,null),to:"/listen"},{title:"Check alerts",short:"Alerts",icon:i.a.createElement(Se.a,null),to:"/alerts"}]},{title:"Mobile libraries",url:"https://www.mobilelibraries.org",icon:i.a.createElement(pe.a,null),links:[{title:"Find my stop",short:"Stops",icon:i.a.createElement(be.a,null),to:"/"},{title:"Mobile vans",short:"Vans",icon:i.a.createElement(pe.a,null),to:"/mobiles"},{title:"Map of stops",short:"Map",icon:i.a.createElement(Ee.a,null),to:"/map"}]},{title:"Library map",url:"https://www.librarymap.co.uk",icon:i.a.createElement(Ee.a,null),links:[{title:"Find my library",short:"Find",icon:i.a.createElement(be.a,null),to:f("/")},{title:"Map of libraries",short:"Map",icon:i.a.createElement(Ee.a,null),to:f("/map")}]}],v="/map"===b.pathname?g.appBarTransparent:g.appBar;return i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{maxWidth:"lg",className:g.topTitle},i.a.createElement(ie.a,null,i.a.createElement(ae.a,{"aria-label":"Toggle site menu",className:g.topIcon,color:"primary",onClick:function(){s(!l),d(t)}},l?i.a.createElement(ue.a,null):i.a.createElement(Ne.a,null)),i.a.createElement("span",{className:g.grow}),i.a.createElement(M.a,{label:h[t].title,color:"secondary"}))),l?i.a.createElement(Q.a,{position:"static",color:"transparent",elevation:0,className:v},i.a.createElement(T.a,{maxWidth:"lg"},i.a.createElement(re.a,{value:p,onChange:function(e,t){d(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"secondary"},h.map((function(e,t){return i.a.createElement(ne.a,{key:"tb_site_"+t,label:e.title,icon:e.icon})}))))):null,i.a.createElement(Q.a,{position:"static",color:"transparent",elevation:0,className:v},i.a.createElement(T.a,{maxWidth:"lg"},i.a.createElement(ie.a,null,i.a.createElement(te.a,{mdUp:!0},h[p].links.map((function(e,a){return i.a.createElement(oe.a,{title:e.title,key:"icnb_menu_lg_"+a},i.a.createElement(ee.a,{component:_.b,to:p===t?e.to:h[p].url+e.to,disableRipple:b.pathname===e.to,disableFocusRipple:b.pathname===e.to,color:"secondary",size:"large",startIcon:e.icon},e.short))}))),i.a.createElement(te.a,{smDown:!0},h[p].links.map((function(e,a){return i.a.createElement(oe.a,{title:e.title,key:"icnb_menu_lg_"+a},i.a.createElement(ee.a,{component:_.b,to:p===t?e.to:h[p].url+e.to,disableRipple:b.pathname===e.to,disableFocusRipple:b.pathname===e.to,color:"secondary",size:"large",startIcon:e.icon},e.title))}))),i.a.createElement("span",{className:g.grow}),"/map"===b.pathname?i.a.createElement(at,null):null))))},it=a(268),ot=a(136),ct=a.n(ot),lt=Object(B.a)((function(e){return{root:{paddingTop:e.spacing(5),marginTop:e.spacing(3),marginBottom:e.spacing(5),width:"100%"},bullet:{margin:e.spacing(2)},grid:{marginTop:e.spacing(2)},loveIcon:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},footerText:{verticalAlign:"middle",display:"inline-flex"},footerRight:{textAlign:"right"},tapTarget:{lineHeight:2.2,fontSize:16}}}));var st=function(){var e=lt();return i.a.createElement("div",{className:e.root},i.a.createElement(Te.a,null),i.a.createElement(F.a,{container:!0,spacing:3,className:e.grid},i.a.createElement(F.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6},i.a.createElement(W.a,{variant:"button"},i.a.createElement(it.a,{href:"https://www.librarylab.uk/libraries-at-home",target:"_blank",rel:"noopener",title:"About the library lab projects and documentation for this project",className:e.tapTarget},"About this project"),i.a.createElement("span",{className:e.bullet}," \u2022 "),i.a.createElement(it.a,{component:_.b,to:"/accessibility",title:"How we make this site accessible",className:e.tapTarget},"Accessibility"),i.a.createElement("span",{className:e.bullet}," \u2022 "),i.a.createElement(it.a,{component:_.b,to:"/privacy",title:"Your privacy on this site",className:e.tapTarget},"Privacy"),i.a.createElement("span",{className:e.bullet}," \u2022 "),i.a.createElement(it.a,{component:_.b,to:"/data",title:"Data used on this site and licensing",className:e.tapTarget},"Data"),i.a.createElement("span",{className:e.bullet}," \u2022 "),i.a.createElement(it.a,{href:"https://github.com/LibrariesHacked/libraries-at-home",target:"_blank",rel:"noopener",title:"Project on GitHub",className:e.tapTarget},"GitHub")),i.a.createElement("br",null),i.a.createElement(W.a,{variant:"body2",className:e.footerText},"A Library Lab project by Libraries Hacked.")),i.a.createElement(F.a,{className:e.footerRight,item:!0,xs:12,sm:6,md:6,lg:6,xl:6},i.a.createElement(W.a,{variant:"body2"},"Data help from"),i.a.createElement(W.a,{variant:"button"},i.a.createElement(it.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/calire",title:"Claire",className:e.tapTarget},"@calire"),i.a.createElement("span",{className:e.bullet}," \u2022 "),i.a.createElement(it.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/shedsue",title:"Sue",className:e.tapTarget},"@shedsue"),i.a.createElement("span",{className:e.bullet}," \u2022 "),i.a.createElement(it.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/richardveevers",title:"Richard",className:e.tapTarget},"@richardveevers"),i.a.createElement("br",null),i.a.createElement(ct.a,{color:"error",className:e.loveIcon})))))},ut=a(269),mt=a(271),pt=a(270),dt=a(86),bt=a.n(dt),gt=a(66),ft=a.n(gt),ht=Object(B.a)((function(e){return{bullet:{display:"inline-block",margin:"0 2px"},card:{marginLeft:e.spacing(1),marginRight:e.spacing(1),border:"1px solid",borderColor:e.palette.outline.main},libraryName:{fontWeight:e.typography.fontWeightBold}}}));var vt=Object(I.f)((function(e){var t=v(),a=Object(C.a)(t,1)[0].services,n=x(),r=Object(C.a)(n,2),o=r[0],c=o.library,l=o.service,s=r[1],u=ht(),m=i.a.createElement("span",{className:u.bullet}," \u2022 "),p=null!=c?Math.round(c.distance/1609):null;return i.a.createElement("div",null,null!=c?i.a.createElement(ut.a,{elevation:0,className:u.card},i.a.createElement(pt.a,null,i.a.createElement(W.a,{component:"h2",variant:"h5"},"Your nearest library is ",i.a.createElement("span",{className:u.libraryName},c.library_name)),i.a.createElement(W.a,{variant:"body2",component:"p"},p," mile",p>1?"s":"",m,[c.address_1,c.address_2,c.address_3,c.postcode].filter((function(e){return""!==e})).join(", "),m,c.local_authority,"Yes"===c.colocated&&null!==c.colocated_with?m+"Colocated with "+c.colocated_with:"")),i.a.createElement(mt.a,null,i.a.createElement(ee.a,{variant:"text",size:"large",color:"primary",startIcon:i.a.createElement(ft.a,null),target:"_blank",href:c.url},"Go to website"),c.local_authority!==l.Name?i.a.createElement(ee.a,{variant:"text",size:"large",color:"primary",startIcon:i.a.createElement(bt.a,null),onClick:function(){return function(t){var n=a.filter((function(e){return e.Name===t}));n&&1===n.length&&(s({type:"SetService",service:n[0]}),Qe(e.history,n[0].systemName))}(c.local_authority)}},"Use this library service"):null)):null)})),yt=a(137),Et=a.n(yt),xt=a(53),kt=a.n(xt),Ot=Object(B.a)((function(e){return{bullet:{display:"inline-block",margin:"0 2px"},card:{marginLeft:e.spacing(1),marginRight:e.spacing(1),border:"1px solid",borderColor:e.palette.outline.main},libraryName:{fontWeight:e.typography.fontWeightBold},scheduleDate:{fontSize:"1.1em",fontWeight:e.typography.fontWeightBold}}}));var jt=Object(I.f)((function(e){var t=v(),a=Object(C.a)(t,1)[0].services,n=x(),r=Object(C.a)(n,2),o=r[0],c=o.mobileLibrary,l=o.service,s=r[1],u=Ot(),m=i.a.createElement("span",{className:u.bullet}," \u2022 "),p=null!=c?Math.round(c.distance/1609):null;return i.a.createElement("div",null,null!=c?i.a.createElement(ut.a,{elevation:0,className:u.card},i.a.createElement(pt.a,null,i.a.createElement(W.a,{component:"h2",variant:"h5"},"Your nearest mobile library stop is ",i.a.createElement("span",{className:u.libraryName},c.name," in ",c.community)),i.a.createElement(W.a,{variant:"body2",component:"p"},p," mile",p>1?"s":"",m,c.address,m,c.organisation_name),i.a.createElement(W.a,{variant:"body2",component:"p"},"Next visiting on  ",i.a.createElement("span",{className:u.scheduleDate},kt()(c.route_schedule[0]).format("dddd Do MMMM h:mma")))),i.a.createElement(mt.a,null,i.a.createElement(ee.a,{variant:"text",size:"large",color:"primary",startIcon:i.a.createElement(Et.a,null),target:"_blank",href:c.timetable},"Go to timetable"),c.organisation_name!==l.Name?i.a.createElement(ee.a,{variant:"text",size:"large",color:"primary",startIcon:i.a.createElement(bt.a,null),onClick:function(){return function(t){var n=a.filter((function(e){return e.Name===t}));n&&1===n.length&&(s({type:"SetService",service:n[0]}),Qe(e.history,n[0].systemName))}(c.organisation_name)}},"Use this library service"):null)):null)})),wt=a(292),Nt=a(272),Lt=a(273),St=a(89),Ct=a(141),_t=a.n(Ct),It=a(152),Tt=a.n(It),Pt=a(142),Bt=a.n(Pt),Rt=a(143),At=a.n(Rt),Mt=a(87),Ft=a.n(Mt),Dt=a(144),Wt=a.n(Dt),Ut=a(145),zt=a.n(Ut),Yt=a(146),Vt=a.n(Yt),Ht=a(147),Gt=a.n(Ht),Jt=a(88),Zt=a.n(Jt),Kt=a(148),$t=a.n(Kt),qt=a(151),Xt=a.n(qt),Qt=a(149),ea=a.n(Qt),ta=a(150),aa=a.n(ta),na=a(138),ra=a.n(na),ia=a(139),oa=a.n(ia),ca=a(140),la=a.n(ca),sa=a(153),ua=a.n(sa),ma=a(52),pa={InstagramIcon:ra.a,FacebookIcon:oa.a,TwitterIcon:la.a},da={FaceIcon:_t.a,GroupIcon:Bt.a,ComputerIcon:At.a,DescriptionIcon:Ft.a,DirectionsBusIcon:pe.a,EventIcon:Wt.a,ExploreIcon:zt.a,FindInPageIcon:Vt.a,HomeIcon:Gt.a,MicIcon:Zt.a,OpenInBrowserIcon:ft.a,PaymentIcon:$t.a,TabletMacIcon:ea.a,WifiIcon:aa.a},ba=Object(B.a)((function(e){return{avatar:{color:"#fff",backgroundColor:St.a[500]},bold:{fontWeight:e.typography.fontWeightBold},card:{border:"1px solid",borderColor:e.palette.outline.main},cardTitle:{fontWeight:e.typography.fontWeightBold,fontSize:"1rem"},cardSubTitle:{fontSize:"1rem"},header:{textAlign:"center"},root:{paddingTop:e.spacing(2)},social:{display:"flex",alignItems:"center",justifyContent:"center"},gridContainer:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},linkText:{columnWidth:"16em"},columnLink:{verticalAlign:"middle",display:"inline-flex",padding:e.spacing(1)},columnLinkIcon:{marginRight:e.spacing(1)}}}));var ga=function(){var e=x(),t=Object(C.a)(e,1)[0].service,a=ba();return i.a.createElement("div",{className:a.root},t&&Object.keys(t).length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{className:a.header,component:"h2",variant:"h4",gutterBottom:!0},"Your library service is ",i.a.createElement("span",{className:a.bold},t.Name)),t["Library notification"]&&""!==t["Library notification"]&&"\n"!==t["Library notification"]?i.a.createElement($,{service:t}):null,i.a.createElement("div",{className:a.social},i.a.createElement(Nt.a,{size:"large",color:"secondary","aria-label":"Links to social media"},ma.services_text.social.filter((function(e){return e.field in t})).map((function(e,a){var n=pa[e.icon];return i.a.createElement(ee.a,{key:"icn_social_"+a,target:"_blank",rel:"noopener",href:e.url+t[e.field],title:e.title,startIcon:i.a.createElement(n,null)},e.title)})))),i.a.createElement(F.a,{container:!0,spacing:3,className:a.gridContainer},t["Android app URL"]||t["iOS app URL"]?i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4},i.a.createElement(ut.a,{elevation:0,className:a.card},i.a.createElement(Lt.a,{avatar:i.a.createElement(wt.a,{className:a.avatar},i.a.createElement(Xt.a,null)),title:"Mobile application",titleTypographyProps:{className:a.cardTitle},subheader:"Use the library on your phone",subheaderTypographyProps:{className:a.cardSubTitle}}),i.a.createElement(mt.a,{disableSpacing:!0},t["Android app URL"]?i.a.createElement(ee.a,{size:"large",color:"primary",className:a.socialIcon,target:"_blank",rel:"noopener",href:t["Android app URL"],title:"App for Android",startIcon:i.a.createElement(Tt.a,null)},"Android app"):null,t["iOS app URL"]?i.a.createElement(ee.a,{size:"large",color:"primary",className:a.socialIcon,target:"_blank",rel:"noopener",href:t["iOS app URL"],title:"App for iOS",startIcon:i.a.createElement(ua.a,null)},"iOS app"):null)))):null,ma.services_text.library_service.filter((function(e){return e.field in t})).map((function(e,n){var r=da[e.icon];return i.a.createElement(F.a,{key:"grd_service_"+n,item:!0,xs:12,sm:6,md:4,lg:4,xl:4},i.a.createElement(ut.a,{elevation:0,className:a.card},i.a.createElement(Lt.a,{avatar:i.a.createElement(wt.a,{className:a.avatar},i.a.createElement(r,null)),title:e.title.replace("[service]",t.Name),titleTypographyProps:{className:a.cardTitle},subheader:e.description,subheaderTypographyProps:{className:a.cardSubTitle}}),i.a.createElement(mt.a,{disableSpacing:!0},i.a.createElement(ee.a,{size:"large",color:"primary",startIcon:i.a.createElement(ft.a,null),target:"_blank",rel:"noopener",href:t[e.field]},e.link_text))))}))),i.a.createElement(W.a,{component:"p",className:a.linkText},ma.services_text.service_links.filter((function(e){return e.field in t})).map((function(e,n){var r=da[e.icon];return i.a.createElement(W.a,{key:"typ_links_"+n,component:"span",className:a.columnLink},i.a.createElement(r,{color:"secondary",className:a.columnLinkIcon}),i.a.createElement(it.a,{key:"typ_link_"+n,target:"_blank",rel:"noopener",href:t[e.field],variant:"subtitle2"},e.text),i.a.createElement("br",null))})))):null)},fa=a(154),ha=a.n(fa),va=Object(B.a)((function(e){return{button:{marginRight:e.spacing(1)},chip:{marginRight:e.spacing(1)}}}));var ya=Object(I.f)((function(e){var t=v(),a=Object(C.a)(t,1)[0].services,n=x(),o=Object(C.a)(n,2),c=o[0].service,l=o[1],s=j(),u=Object(C.a)(s,2);Object(S.a)(u[0]),u[1];var m=Object(r.useState)(null),p=Object(C.a)(m,2),d=p[0],b=p[1],g=function(){return b(null)},f=va();return i.a.createElement(i.a.Fragment,null,0===Object.keys(c).length?i.a.createElement(oe.a,{title:"Choose library service"},i.a.createElement(ee.a,{size:"large",color:"primary",className:f.button,onClick:function(e){return t=e.currentTarget,b(t);var t},startIcon:i.a.createElement(ha.a,null)},"Choose service")):i.a.createElement(M.a,{size:"medium",className:f.chip,color:"primary",onDelete:function(){l({type:"ClearAll"}),et(e.history)},label:c.Name}),i.a.createElement(Be.a,{id:"menu-library-service",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:function(){return g()}},a.filter((function(e){return e&&e.Name})).sort((function(e,t){return e.Name.localeCompare(t.Name)})).map((function(t){return i.a.createElement(Re.a,{key:"mnu_itm_org_"+t.Code,onClick:function(){return function(t){l({type:"SetService",service:t}),Qe(e.history,t.systemName),g()}(t)}},t.Name)}))))})),Ea=Object(B.a)((function(e){return{search:{alignContent:"center",textAlign:"center",display:"table",marginLeft:"auto",marginRight:"auto",marginBottom:"10px"},title:{textAlign:"center"}}}));var xa=function(){var e=Ea();return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{component:"h1",variant:"h3",color:"secondary",className:e.title,gutterBottom:!0},"Your library service"),i.a.createElement("div",{className:e.search},i.a.createElement(at,{settings:!1})),i.a.createElement(W.a,{component:"p",variant:"body1",className:e.title,gutterBottom:!0},"Use this search to find the library service in your area"),i.a.createElement("div",{className:e.search},i.a.createElement(ya,null)),i.a.createElement(F.a,{container:!0,spacing:3},i.a.createElement(F.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6},i.a.createElement(vt,null)),i.a.createElement(F.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6},i.a.createElement(jt,null))),i.a.createElement(ga,null))},ka=a(274),Oa=a(285),ja=a(155),wa=a.n(ja),Na=a(156),La=a.n(Na),Sa=a(289),Ca=a(52),_a=function(){var e=Object(L.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ca.servicesApi,e.next=3,Ye.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=7;break}return a.data.forEach((function(e){e.systemName=Pa(e.Name)})),e.abrupt("return",a.data);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ia=function(){var e=Object(L.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ca.videoApi,e.next=3,Ye.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ta=function(){var e=Object(L.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ca.blogsApi,e.next=3,Ye.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pa=function(e){return e.split(", ").reverse().join(" ").replace(/[. ,:-]+/g,"-").toLowerCase()},Ba=a(52),Ra=Object(B.a)((function(e){return{title:{textAlign:"center"},card:{position:"relative"},media:{height:150},overlay:{color:"#ffffff",position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%"},playIcon:{color:"#2e7d32"},rating:{marginLeft:e.spacing(1)},video:{maxWidth:"100%"}}}));var Aa=function(){var e=this,t=v(),a=Object(C.a)(t,1)[0],n=a.videos,o=a.services,c=Ra(),l=Object(r.useState)(!1),s=Object(C.a)(l,2),u=s[0],m=s[1],p=Object(r.useState)(""),d=Object(C.a)(p,2),b=d[0],g=d[1],f=function(e){m(!0),g("https://www.youtube.com/embed/"+e.replace("yt:video:",""))},h=n.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{}),y={};return o.forEach((function(e){e["YouTube ID"]&&(y[e["YouTube ID"]]=e)})),i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{component:"h1",variant:"h3",color:"secondary",className:c.title},"Library TV"),i.a.createElement(W.a,{component:"p",variant:"body1",className:c.title},"Watch videos published by library services on YouTube"),Object.keys(h).map((function(t,a){return i.a.createElement(i.a.Fragment,{key:"frg_dates_"+a},i.a.createElement(Pe.a,{component:"div",disableSticky:!0},kt()(t,"YYYY-MM-DD").calendar(null,Ba.calendarDisplay)),i.a.createElement(F.a,{container:!0,spacing:3},h[t].map((function(t,a){var n=t.custom_elements,r=n.filter((function(e){return"media:group"===Object.keys(e)[0]}))[0]["media:group"],o=r.filter((function(e){return"media:thumbnail"===Object.keys(e)[0]}))[0]["media:thumbnail"],l=r.filter((function(e){return"media:community"===Object.keys(e)[0]}))[0]["media:community"].filter((function(e){return"media:starrating"===Object.keys(e)[0]}))[0]["media:starrating"],s=l._attr.average,u=n.filter((function(e){return"yt:channelid"===Object.keys(e)[0]}))[0]["yt:channelid"],m=y[u],p=function(e){var t=Ca.youTubeUrl,a={UC:["channel/","Channel"],PL:["playlist/","Playlist"]}[e.substring(0,2)];return{url:t+(a?a[0]:"user/")+e,type:a?a[1]:"Account"}}(u);return i.a.createElement(F.a,{key:"grd_vids_"+a,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},i.a.createElement(ut.a,{variant:"outlined",className:c.card},i.a.createElement(ka.a,{className:c.media,image:o._attr.url,title:t.title}),i.a.createElement(pt.a,{className:c.overlay},i.a.createElement(W.a,{variant:"caption",component:"p"},t.title)),i.a.createElement(mt.a,null,i.a.createElement(ee.a,{size:"small",className:c.playIcon,startIcon:i.a.createElement(wa.a,null),onClick:f.bind(e,t.guid)},"Play"),m?i.a.createElement(ee.a,{size:"small",color:"secondary",startIcon:i.a.createElement(La.a,null),target:"_blank",rel:"noopener",href:p.url},m.Name):null,l&&s&&parseFloat(s)>0?i.a.createElement(oe.a,{title:s?"Rated "+s:"No rating","aria-label":"add"},i.a.createElement("span",null,i.a.createElement(Sa.a,{size:"small",className:c.rating,name:"read-only",value:parseFloat(s),precision:.5,readOnly:!0}))):null)))}))))})),i.a.createElement(Oa.a,{maxWidth:"sm",onClose:function(){m(!1),g("")},"aria-labelledby":"YouTube dialog",open:u},i.a.createElement("iframe",{title:"Video",className:c.video,width:"560",height:"315",src:b,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})))},Ma=a(52),Fa=Object(B.a)((function(e){return{columnLink:{verticalAlign:"middle",display:"inline-flex"},header:{textAlign:"center"},linkText:{columnWidth:"16em"},columnLinkIcon:{marginRight:e.spacing(1)}}}));var Da=function(){var e=v(),t=Object(C.a)(e,1)[0].blogs,a=Fa(),n=t.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{});return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{component:"h3",variant:"h6",className:a.header,gutterBottom:!0},"Recent blogs"),i.a.createElement(W.a,{component:"p",className:a.linkText},Object.keys(n).slice(0,3).map((function(e,t){return i.a.createElement(i.a.Fragment,{key:"frg_blogdates_"+t},i.a.createElement(Pe.a,{disableSticky:!0,component:"span",className:a.columnLink},kt()(e,"YYYY-MM-DD").calendar(null,Ma.calendarDisplay)),i.a.createElement("br",null),n[e].map((function(e,t){return i.a.createElement(i.a.Fragment,{key:"typ_links_"+t},i.a.createElement(W.a,{component:"span",className:a.columnLink},i.a.createElement(Ft.a,{color:"secondary",className:a.columnLinkIcon}),i.a.createElement(it.a,{key:"typ_link_"+t,target:"_blank",rel:"noopener",href:e.url,variant:"subtitle2"},e.author+". "+e.title)),i.a.createElement("br",null))})))}))))},Wa=Object(B.a)((function(e){return{header:{textAlign:"center"},subtitle:{textAlign:"center"}}}));var Ua=function(){var e=Wa();return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{component:"h1",variant:"h3",color:"secondary",className:e.header},"Read"),i.a.createElement(W.a,{component:"p",variant:"body1",className:e.subtitle,gutterBottom:!0},"The things library services are writing"),i.a.createElement(Da,null))},za=a(52),Ya=Object(B.a)((function(e){return{columnLink:{verticalAlign:"middle",display:"inline-flex"},header:{textAlign:"center"},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(2)},linkText:{columnWidth:"16em"},columnLinkIcon:{marginRight:e.spacing(1)}}}));var Va=function(){var e=v(),t=Object(C.a)(e,2),a=t[0].services,n=(t[1],Ya());return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{component:"h3",variant:"h6",className:n.header,gutterBottom:!0},"Library podcasts"),i.a.createElement(W.a,{component:"p",className:n.linkText},a.filter((function(e){return e["Podcast URL"]&&""!==e["Podcast URL"]})).map((function(e,t){return i.a.createElement(i.a.Fragment,{key:"frg_podcasts_"+t},i.a.createElement(W.a,{component:"span",className:n.columnLink},i.a.createElement(Zt.a,{color:"secondary",className:n.columnLinkIcon}),i.a.createElement(it.a,{rel:"noopener",target:"_blank",href:e[za.podcasts.url_field],variant:"subtitle2"},e[za.podcasts.service_name_field]+". "+e[za.podcasts.podcast_name_field])),i.a.createElement("br",null))}))))},Ha=Object(B.a)((function(e){return{header:{textAlign:"center"},subtitle:{textAlign:"center"}}}));var Ga=function(){var e=Ha();return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{component:"h1",variant:"h3",color:"secondary",className:e.header},"Listen"),i.a.createElement(W.a,{component:"p",variant:"body1",className:e.subtitle,gutterBottom:!0},"Hear what libraries are talking about"),i.a.createElement(Va,null))},Ja=a(164),Za=a(5),Ka=Object(B.a)((function(e){return{listItem:{marginTop:e.spacing(1)},root:{"& table":{display:"block",wordBreak:"normal",width:"100%",overflowX:"auto",WebkitOverflowScrolling:"touch",borderCollapse:"collapse",marginBottom:"16px",borderSpacing:0,overflow:"hidden","& .prop-name":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace'},"& .required":{color:"light"===e.palette.type?"#006500":"#a5ffa5"},"& .prop-type":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace',color:"light"===e.palette.type?"#932981":"#ffb6ec"},"& .prop-default":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace',borderBottom:"1px dotted ".concat(e.palette.divider)}},"& td":Object(l.a)(Object(l.a)({},e.typography.body2),{},{borderBottom:"1px solid ".concat(e.palette.divider),padding:16,color:e.palette.text.primary}),"& th":{fontSize:14,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium,color:e.palette.text.primary,whiteSpace:"pre",borderBottom:"1px solid ".concat(e.palette.divider),padding:16}}}})),$a={overrides:{h1:{component:W.a,props:{gutterBottom:!0,variant:"h4",color:"secondary"}},h2:{component:W.a,props:{gutterBottom:!0,variant:"h5",color:"secondary"}},h3:{component:W.a,props:{gutterBottom:!0,variant:"h6",color:"secondary"}},h4:{component:W.a,props:{gutterBottom:!0,variant:"h6",paragraph:!0,color:"secondary"}},p:{component:W.a,props:{paragraph:!0,color:"secondary"}},a:{component:it.a},li:{component:Object(Za.a)(Ka)((function(e){var t=e.classes,a=Object(Ja.a)(e,["classes"]);return i.a.createElement("li",{className:t.listItem},i.a.createElement(W.a,Object.assign({component:"span"},a)))}))}}};var qa=function(e){var t=e.page,a=Object(r.useState)(""),n=Object(C.a)(a,2),o=n[0],c=n[1],l=Ka();return Object(r.useEffect)((function(){function e(){return(e=Object(L.a)(N.a.mark((function e(){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:return a=e.sent,e.next=5,a.text();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),i.a.createElement(Z.a,Object.assign({className:l.root,options:$a},e),o)},Xa=a(286);function Qa(e){return i.a.createElement(J.a,Object.assign({elevation:0,variant:"filled"},e))}var en=function(){var e=j(),t=Object(C.a)(e,2),a=t[0],n=a.notificationOpen,r=a.notificationSeverity,o=a.notificationMessage,c=t[1],l=function(){c({type:"CloseNotification"})};return i.a.createElement(Xa.a,{open:n,autoHideDuration:4e3,onClose:l},i.a.createElement(Qa,{onClose:l,severity:r},o))},tn=a(157),an=a.n(tn),nn=a(158),rn=a.n(nn),on=a(159),cn=a.n(on),ln=a(160),sn=a.n(ln),un=Object(B.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1}}}));var mn=function(){var e=j(),t=Object(C.a)(e,2),a=t[0],n=a.loadingServices,o=a.loadingVideos,c=a.loadingBlogs,l=a.loadingPostcode,s=t[1],u=v(),m=Object(C.a)(u,2);Object(S.a)(m[0]);var p=m[1],d=x(),b=Object(C.a)(d,2);Object(S.a)(b[0]);var g=b[1];Object(r.useEffect)((function(){function e(){return(e=Object(L.a)(N.a.mark((function e(){var t,a,n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"ToggleLoadingServices"}),e.next=3,_a();case 3:t=e.sent,a={},t.forEach((function(e){a[e.systemName]=e})),p({type:"AddServices",services:t}),s({type:"ToggleLoadingServices"}),n=new URLSearchParams(window.location.search),(r=n.get("service"))&&a[r]&&(i=a[r],g({type:"SetService",service:i}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(L.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"ToggleLoadingVideos"}),e.next=3,Ia();case 3:t=e.sent,p({type:"AddVideos",videos:t}),s({type:"ToggleLoadingVideos"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(L.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"ToggleLoadingBlogs"}),e.next=3,Ta();case 3:t=e.sent,p({type:"AddBlogs",blogs:t}),s({type:"ToggleLoadingBlogs"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),function(){a.apply(this,arguments)}()}),[p,s,g]);var f=un(),h=n||o||c||l;return i.a.createElement(_.a,null,i.a.createElement("div",{className:f.root},i.a.createElement(rt,{site:1,loading:h}),h?i.a.createElement(P.a,{variant:"buffer",value:0,valueBuffer:0,color:"secondary"}):null,i.a.createElement(T.a,{maxWidth:"lg"},i.a.createElement("main",{className:f.content},i.a.createElement(I.a,{path:"/",exact:!0,render:function(){return i.a.createElement(xa,null)}}),i.a.createElement(I.a,{path:"/watch",exact:!0,render:function(){return i.a.createElement(Aa,null)}}),i.a.createElement(I.a,{path:"/read",exact:!0,render:function(){return i.a.createElement(Ua,null)}}),i.a.createElement(I.a,{path:"/listen",exact:!0,render:function(){return i.a.createElement(Ga,null)}}),i.a.createElement(I.a,{path:"/alerts",exact:!0,render:function(){return i.a.createElement(X,null)}}),i.a.createElement(I.a,{path:"/about",exact:!0,render:function(){return i.a.createElement(qa,{page:an.a})}}),i.a.createElement(I.a,{path:"/accessibility",exact:!0,render:function(){return i.a.createElement(qa,{page:rn.a})}}),i.a.createElement(I.a,{path:"/data",exact:!0,render:function(){return i.a.createElement(qa,{page:cn.a})}}),i.a.createElement(I.a,{path:"/privacy",exact:!0,render:function(){return i.a.createElement(qa,{page:sn.a})}}),i.a.createElement(I.a,{path:["/http:","/https:"],component:function(e){return window.location.replace(e.location.pathname.substr(1)),null}}))),i.a.createElement(T.a,{maxWidth:"lg"},i.a.createElement(st,null)),i.a.createElement(en,null)))},pn={services:[],videos:[],blogs:[]},dn=function(e,t){switch(t.type){case"AddServices":return Object(l.a)(Object(l.a)({},e),{},{services:t.services});case"AddVideos":return Object(l.a)(Object(l.a)({},e),{},{videos:t.videos});case"AddBlogs":return Object(l.a)(Object(l.a)({},e),{},{blogs:t.blogs});default:return e}},bn={searchPostcode:"",searchType:"",searchDistance:1609,searchPosition:[],service:{},currentServiceSystemName:null,library:null,mobileLibrary:null},gn=function(e,t){switch(t.type){case"SetSearchDistance":return Object(l.a)(Object(l.a)({},e),{},{searchDistance:t.searchDistance});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{searchPostcode:t.searchPostcode,searchPosition:t.searchPosition,searchType:"postcode",currentServiceSystemName:null});case"SetService":return Object(l.a)(Object(l.a)({},e),{},{service:t.service,currentServiceSystemName:t.service.systemName});case"SetLocation":return Object(l.a)(Object(l.a)({},e),{},{searchPosition:t.searchPosition});case"SetLibrary":return Object(l.a)(Object(l.a)({},e),{},{library:t.library});case"SetMobileLibrary":return Object(l.a)(Object(l.a)({},e),{},{mobileLibrary:t.mobileLibrary});case"ClearAll":return Object(l.a)(Object(l.a)({},e),{},{searchPostcode:"",searchPosition:[],searchType:"",service:{},currentServiceSystemName:null,library:null,mobileLibrary:null});default:return e}},fn={notificationOpen:!1,notificationSeverity:"",notificationMessage:"",loadingPostcode:!1,loadingLocation:!1,loadingServices:!1,loadingVideos:!1,loadingBlogs:!1},hn=function(e,t){switch(t.type){case"ShowNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:!0,notificationSeverity:t.notificationSeverity,notificationMessage:t.notificationMessage});case"CloseNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:!1});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{loadingPostcode:!1,mapPosition:t.mapPosition,mapZoom:[13]});case"ToggleLoadingPostcode":return Object(l.a)(Object(l.a)({},e),{},{loadingPostcode:!e.loadingPostcode});case"ToggleLoadingLocation":return Object(l.a)(Object(l.a)({},e),{},{loadingLocation:!e.loadingLocation});case"ToggleLoadingServices":return Object(l.a)(Object(l.a)({},e),{},{loadingServices:!e.loadingServices});case"ToggleLoadingVideos":return Object(l.a)(Object(l.a)({},e),{},{loadingVideos:!e.loadingVideos});case"ToggleLoadingBlogs":return Object(l.a)(Object(l.a)({},e),{},{loadingBlogs:!e.loadingBlogs});default:return e}},vn=Object(b.a)({palette:{primary:{main:m.a[800]},secondary:{main:d.a[600]},outline:{main:d.a[50]}},overrides:{MuiButton:{text:{textTransform:"none"},root:{textTransform:"none"}},MuiDivider:{root:{backgroundColor:d.a[50]}},MuiTypography:{button:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}});var yn=function(){return i.a.createElement(h,{initialState:pn,reducer:dn},i.a.createElement(E,{initialState:bn,reducer:gn},i.a.createElement(O,{initialState:fn,reducer:hn},i.a.createElement(g.a,{theme:vn},i.a.createElement(s.a,null),i.a.createElement(mn,null)))))};a(208);c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(yn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e){e.exports=JSON.parse('{"postcodeApi":"https://api-geography.librarydata.uk/rest/postcodes/","videoApi":"https://api.librarydata.uk/services/airtable/feeds/youtube.json","blogsApi":"https://api.librarydata.uk/services/airtable/feeds/blogs.json","servicesApi":"https://api.librarydata.uk/services/airtable","libraryApi":"https://api.librarydata.uk/libraries/nearest","mobileLibraryApi":"https://api.mobilelibraries.org/api/stops/nearest","youTubeUrl":"https://www.youtube.com/","calendarDisplay":{"lastDay":"[From Yesterday]","sameDay":"[New Today]","nextDay":"[Tomorrow]","lastWeek":"[Last] dddd","nextWeek":"dddd","sameElse":"L"},"services_text":{"social":[{"field":"Instagram name","icon":"InstagramIcon","url":"https://www.instagram.com/","title":"Instagram","colour":"#405DE6"},{"field":"Facebook page name","icon":"FacebookIcon","url":"https://www.facebook.com/","title":"Facebook","colour":"#4267B2"},{"field":"Twitter handle","icon":"TwitterIcon","url":"https://twitter.com/","title":"Twitter","colour":"#1DA1F2"}],"library_service":[{"field":"Service URL","title":"Visit [service] website","description":"View all information about your library service","link_text":"Go to the website","icon":"OpenInBrowserIcon"},{"field":"Catalogue URL","title":"Browse the catalogue","description":"Find an item to borrow or reserve","link_text":"Online catalogue","icon":"FindInPageIcon"},{"field":"New member URL","title":"Join [service] libraries","description":"Start having fun with your library","link_text":"Join now","icon":"FaceIcon"},{"field":"Childrens service URL","title":"Information for children","description":"Libraries for everyone","link_text":"See children\'s services","icon":"GroupIcon"},{"field":"Ebook URL","title":"Library ebooks","description":"Read ebooks on your devices","link_text":"Find an ebook","icon":"TabletMacIcon"}],"service_links":[{"field":"Libraries URL","text":"Find your local library","icon":"FindInPageIcon"},{"field":"Mobile libraries URL","text":"Discover when the mobile library visits","icon":"DirectionsBusIcon"},{"field":"Home service URL","text":"Check if the library can come to your home","icon":"HomeIcon"},{"field":"Events URL","text":"See events in your libraries","icon":"EventIcon"},{"field":"Computer access URL","text":"Book a computer in the library","icon":"ComputerIcon"},{"field":"Wifi access URL","text":"Use Wifi in the library","icon":"WifiIcon"},{"field":"Fees and charges URL","text":"Understand fees and charges for your library service","icon":"PaymentIcon"},{"field":"News or Blog URL","text":"Read latest library news","icon":"DescriptionIcon"},{"field":"Podcast URL","text":"Listen to a library Podcast","icon":"MicIcon"}]},"podcasts":{"service_name_field":"Name","podcast_name_field":"Podcast name","url_field":"Podcast URL"}}')}},[[179,1,2]]]);
//# sourceMappingURL=main.c868ed6f.chunk.js.map
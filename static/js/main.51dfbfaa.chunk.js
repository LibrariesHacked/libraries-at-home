(this["webpackJsonplibraries-at-home"]=this["webpackJsonplibraries-at-home"]||[]).push([[0],{127:function(e,t,a){e.exports=a.p+"static/media/about.1ea0fd5a.md"},128:function(e,t,a){e.exports=a.p+"static/media/accessibility.a43f53e5.md"},129:function(e,t,a){e.exports=a.p+"static/media/data.e34f2471.md"},130:function(e,t,a){e.exports=a.p+"static/media/privacy.a013c74b.md"},145:function(e,t,a){e.exports=a(179)},178:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getPosition",(function(){return Ne})),a.d(n,"getCurrentPosition",(function(){return Te})),a.d(n,"getCurrentPostcode",(function(){return Le})),a.d(n,"getPostcode",(function(){return Ce})),a.d(n,"getServiceDataFromPostcode",(function(){return Pe}));var r=a(0),i=a.n(r),c=a(14),o=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(150);var l=a(12),s=a(248),u=a(131),m=a.n(u),p=a(132),d=a.n(p),g=a(133),b=a(247),f=Object(r.createContext)(),h=function(e){var t=e.reducer,a=e.initialState,n=e.children;return i.a.createElement(f.Provider,{value:Object(r.useReducer)(t,a)},n)},v=function(){return Object(r.useContext)(f)},y=Object(r.createContext)(),E=function(e){var t=e.reducer,a=e.initialState,n=e.children;return i.a.createElement(y.Provider,{value:Object(r.useReducer)(t,a)},n)},k=function(){return Object(r.useContext)(y)},x=Object(r.createContext)(),O=function(e){var t=e.reducer,a=e.initialState,n=e.children;return i.a.createElement(x.Provider,{value:Object(r.useReducer)(t,a)},n)},j=function(){return Object(r.useContext)(x)},w=a(10),N=a.n(w),T=a(19),S=a(98),L=a(13),_=a(57),C=a(16),R=a(233),P=a(246),A=a(226),B=a(235),I=a(237),F=a(258),M=a(251),U=a(230),D=a(236),W=a(249),z=a(234),Y=a(257),V=a(110),H=a.n(V),G=a(112),J=a.n(G),Z=a(77),$=a.n(Z),q=a(78),K=a.n(q),X=a(111),Q=a.n(X),ee=a(108),te=a.n(ee),ae=a(71),ne=a.n(ae),re=a(109),ie=a.n(re),ce=a(67),oe=a.n(ce),le=a(70),se=a.n(le),ue=a(134),me=a(231),pe=a(252),de=a(232),ge=a(254),be=a(256),fe=a(105),he=a.n(fe),ve=a(74),ye=a(106),Ee=a.n(ye),ke=a(107),xe=a.n(ke),Oe=a(42),je=a.n(Oe),we=a(44);function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,a){navigator.geolocation.getCurrentPosition(t,a,e)}))}function Te(){return Se.apply(this,arguments)}function Se(){return(Se=Object(T.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e.next=3,Ne(t);case 3:return a=e.sent,e.abrupt("return",[a.coords.longitude,a.coords.latitude]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(T.a)(N.a.mark((function e(t,a){var n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.postcodes.io/postcodes?lon=".concat(t,"&lat=").concat(a),e.prev=1,e.next=4,je.a.get(n);case 4:if(200!==(r=e.sent).status){e.next=9;break}if(!((i=r.data.result).length>0)){e.next=9;break}return e.abrupt("return",i[0].postcode);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function Ce(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(T.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.a.get(we.postcodeApi+t);case 2:return a=e.sent,e.abrupt("return",{location:[a.data.longitude,a.data.latitude],library_service_name:a.data.library_service_name,library_service:a.data.library_service});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(T.a)(N.a.mark((function e(t,a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t);case 2:if(n=e.sent,!((r=a.filter((function(e){return e.Code===n.library_service}))).length>0)){e.next=6;break}return e.abrupt("return",{service:r[0],location:n.location});case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be=Object(A.a)((function(e){return{grow:{flexGrow:1},iconButton:{padding:e.spacing()},iconProgress:{margin:e.spacing()},inputInput:{paddingTop:e.spacing(),paddingRight:e.spacing(),paddingBottom:e.spacing(),paddingLeft:e.spacing(2),fontWeight:e.typography.fontWeightBold},search:{position:"relative",border:"1px solid #E0E0E0",borderRadius:e.shape.borderRadius,backgroundColor:Object(ve.fade)(e.palette.common.white,.8),"&:hover":{backgroundColor:Object(ve.fade)(e.palette.common.white,.9)},marginLeft:0,marginRight:e.spacing(),display:"flex",maxWidth:240}}}));var Ie=function(e){var t=e.settings,a=v(),c=Object(L.a)(a,2),o=c[0].services,l=(c[1],k()),s=Object(L.a)(l,2),u=s[0],m=u.searchType,p=u.searchPostcode,d=(u.searchDistance,s[1]),g=j(),b=Object(L.a)(g,2),f=b[0].loadingPostcode,h=b[1],y=Object(r.useState)(p),E=Object(L.a)(y,2),x=E[0],O=E[1],w=Object(r.useState)(null),S=Object(L.a)(w,2),_=S[0],C=S[1],R=Object(r.useState)(!1),P=Object(L.a)(R,2),A=P[0],B=P[1],I=Object(r.useState)([]),F=Object(L.a)(I,2),M=F[0],D=F[1],W=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}({searchPostcode:p});Object(r.useEffect)((function(){W&&p!==W.searchPostcode&&O(p);var e=function(){var e=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=6;break}return e.next=3,Te();case 3:t=e.sent,D(t),B(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(T.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"ToggleLoadingPostcode"}),h({type:"LoadingPostcode"}),e.next=4,Pe(t,o);case 4:a=e.sent,d({type:"SetPostcodeSearch",searchPostcode:x,searchPosition:a.location}),d({type:"SetService",service:a.service}),h({type:"ToggleLoadingPostcode"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(T.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,!(M.length>0)){e.next=5;break}return e.next=4,Le.apply(n,Object(ue.a)(M));case 4:a=e.sent;case 5:a&&(O(a),t(a));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),a()}),[p,A,M]);var z=function(){return C(null)},V=function(e){z(),d({type:"SetSearchDistance",searchDistance:e}),"postcode"===m&&H()},H=function(){var e=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h({type:"ToggleLoadingPostcode"}),""!==x){e.next=4;break}return h({type:"ShowNotification",notificationMessage:"You must enter a postcode"}),e.abrupt("return");case 4:if(h({type:"LoadingPostcode"}),!function(e){return/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/.test(e)}(x.trim())){e.next=14;break}return e.next=9,Pe(x.trim(),o);case 9:t=e.sent,d({type:"SetPostcodeSearch",searchPostcode:x,searchPosition:t.location}),d({type:"SetService",service:t.service}),e.next=15;break;case 14:h({type:"ShowNotification",notificationMessage:"Could not find postcode"});case 15:h({type:"ToggleLoadingPostcode"});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){}),[M]);var G=Be();return i.a.createElement("div",{className:G.search},i.a.createElement(pe.a,{placeholder:"Postcode",classes:{input:G.inputInput},value:x,onChange:function(e){return O(e.target.value.toUpperCase())},onKeyDown:function(e){13===e.keyCode&&H()}}),i.a.createElement("div",{className:G.grow}),i.a.createElement(Y.a,{title:"Use your current location"},i.a.createElement(U.a,{"aria-label":"Search",color:"primary",className:G.iconButton,onClick:function(){return B(!0)}},i.a.createElement(he.a,null))),"postcode"===m?i.a.createElement(Y.a,{title:"Clear search"},i.a.createElement(U.a,{"aria-label":"Clear search",className:G.iconButton,onClick:function(){D([]),O(""),d({type:"ClearAll"})}},i.a.createElement(Ee.a,null))):null,i.a.createElement(Y.a,{title:"Search by postcode"},f?i.a.createElement(me.a,{size:22,className:G.iconProgress}):i.a.createElement(U.a,{"aria-label":"Search",color:"primary",className:G.iconButton,onClick:function(){return H()}},i.a.createElement(oe.a,null))),t?i.a.createElement(Y.a,{title:"Change search settings"},i.a.createElement(U.a,{"aria-label":"Open search settings menu",className:G.iconButton,color:"secondary",onClick:function(e){!function(e){C(e.currentTarget)}(e)}},i.a.createElement(xe.a,null))):null,i.a.createElement(ge.a,{id:"mnu-settings",anchorEl:_,keepMounted:!0,open:Boolean(_),onClose:function(){return z()}},i.a.createElement(de.a,{disableSticky:!0},"Search distance"),i.a.createElement(be.a,{onClick:function(){return V(1609)}},"1 mile"),i.a.createElement(be.a,{onClick:function(){return V(4827)}},"3 miles"),i.a.createElement(be.a,{onClick:function(){return V(8045)}},"5 miles"),i.a.createElement(be.a,{onClick:function(){return V(16090)}},"10 miles"),i.a.createElement(be.a,{onClick:function(){return V(32180)}},"20 miles"),i.a.createElement(be.a,{onClick:function(){return V(80450)}},"50 miles")))},Fe=Object(A.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"white",position:"relative"},appBarTransparent:{zIndex:e.zIndex.drawer+1,backgroundColor:"rgba(250, 250, 250, 0.8)",position:"relative"},grow:{flexGrow:1},siteTitle:{margin:e.spacing(1),padding:e.spacing(1),display:"inline-block",verticalAlign:"middle",color:e.palette.primary.main,backgroundColor:"rgba(250, 250, 250, 0.8)",border:"1px solid #e5e5e5",borderRadius:26},siteTitleIcon:{verticalAlign:"sub"},title:{margin:e.spacing(2),display:"inline-block",verticalAlign:"middle"},topIcon:{backgroundColor:"rgba(250, 250, 250, 0.8)",border:"1px solid #e5e5e5","&:hover":{backgroundColor:"rgba(250, 250, 250, 0.8)"}},topTitle:{position:"relative",zIndex:e.zIndex.drawer+1}}}));var Me=function(e){var t=e.site,a=k(),n=Object(L.a)(a,2),c=n[0].currentServiceSystemName,o=(n[1],Object(r.useState)(!1)),l=Object(L.a)(o,2),s=l[0],u=l[1],m=Object(r.useState)(t),p=Object(L.a)(m,2),d=p[0],g=p[1],b=Object(C.useLocation)(),f=Fe(),h=function(e){return c?e+"?service="+c:e},v=[{title:"Library lab",url:"https://www.librarylab.uk",icon:i.a.createElement(se.a,null),links:[{title:"About library lab",short:"Lab",icon:i.a.createElement(se.a,null),to:"/"}]},{title:"Libraries at home",url:"https://www.librariesathome.co.uk",icon:i.a.createElement(te.a,null),links:[{title:"Find service",short:"Find",icon:i.a.createElement(oe.a,null),to:h("/")},{title:"Watch library TV",short:"Watch",icon:i.a.createElement(ie.a,null),to:"/watch"},{title:"Read blogs",short:"Read",icon:i.a.createElement(H.a,null),to:"/read"},{title:"Listen podcasts",short:"Listen",icon:i.a.createElement(Q.a,null),to:"/listen"}]},{title:"Mobile libraries",url:"https://www.mobilelibraries.org",icon:i.a.createElement($.a,null),links:[{title:"Find my stop",short:"Stops",icon:i.a.createElement(K.a,null),to:"/"},{title:"Mobile vans",short:"Vans",icon:i.a.createElement($.a,null),to:"/mobiles"},{title:"Map of stops",short:"Map",icon:i.a.createElement(ne.a,null),to:"/map"}]},{title:"Library map",url:"https://www.librarymap.co.uk",icon:i.a.createElement(ne.a,null),links:[{title:"Find my library",short:"Find",icon:i.a.createElement(K.a,null),to:h("/")},{title:"Map of libraries",short:"Map",icon:i.a.createElement(ne.a,null),to:h("/map")}]}],y="/map"===b.pathname?f.appBarTransparent:f.appBar;return i.a.createElement(i.a.Fragment,null,i.a.createElement(R.a,{maxWidth:"lg",className:f.topTitle},i.a.createElement(z.a,null,i.a.createElement(U.a,{"aria-label":"Toggle site menu",className:f.topIcon,color:"primary",onClick:function(){u(!s),g(t)}},s?i.a.createElement(J.a,null):i.a.createElement(se.a,null)),i.a.createElement("span",{className:f.grow}),i.a.createElement(F.a,{label:v[t].title,color:"secondary"}))),s?i.a.createElement(B.a,{position:"static",color:"default",elevation:0,className:y},i.a.createElement(R.a,{maxWidth:"lg"},i.a.createElement(W.a,{centered:!0,value:d,onChange:function(e,t){g(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"secondary"},v.map((function(e,t){return i.a.createElement(D.a,{key:"tb_site_"+t,label:e.title,icon:e.icon})}))))):null,i.a.createElement(B.a,{position:"static",color:"inherit",elevation:0,className:y},i.a.createElement(R.a,{maxWidth:"lg"},i.a.createElement(z.a,null,i.a.createElement(M.a,{mdUp:!0},v[d].links.map((function(e,a){return i.a.createElement(Y.a,{title:e.title,key:"icnb_menu_lg_"+a},i.a.createElement(I.a,{component:_.b,to:d===t?e.to:v[d].url+e.to,disableRipple:b.pathname===e.to,disableFocusRipple:b.pathname===e.to,color:"secondary",size:"large",startIcon:e.icon},e.short))}))),i.a.createElement(M.a,{smDown:!0},v[d].links.map((function(e,a){return i.a.createElement(Y.a,{title:e.title,key:"icnb_menu_lg_"+a},i.a.createElement(I.a,{component:_.b,to:d===t?e.to:v[d].url+e.to,disableRipple:b.pathname===e.to,disableFocusRipple:b.pathname===e.to,color:"secondary",size:"large",startIcon:e.icon},e.title))}))),i.a.createElement("span",{className:f.grow}),"/map"===b.pathname?i.a.createElement(Ie,null):null))))},Ue=a(72),De=a.n(Ue),We=a(238),ze=a(239),Ye=a(240),Ve=a(138),He=a(113),Ge=a.n(He),Je=Object(A.a)((function(e){return{root:{paddingTop:e.spacing(5),marginTop:e.spacing(3),marginBottom:e.spacing(5),width:"100%"},grid:{marginTop:e.spacing(2)},loveIcon:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},footerText:{verticalAlign:"middle",display:"inline-flex"},footerRight:{textAlign:"right"},tapTarget:{lineHeight:2.2,fontSize:16}}}));var Ze=function(){var e=Je();return i.a.createElement("div",{className:e.root},i.a.createElement(We.a,null),i.a.createElement(ze.a,{container:!0,spacing:3,className:e.grid},i.a.createElement(ze.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6},i.a.createElement(Ve.a,{variant:"body1",className:e.footerText},"Built by Libraries Hacked"),i.a.createElement("br",null),i.a.createElement(Ve.a,{variant:"button"},i.a.createElement(Ye.a,{component:De.a,to:"/accessibility",title:"How we make this site accessible",className:e.tapTarget},"Accessibility"),i.a.createElement("br",null),i.a.createElement(Ye.a,{component:De.a,to:"/privacy",title:"Your privacy on this site",className:e.tapTarget},"Privacy"),i.a.createElement("br",null),i.a.createElement(Ye.a,{component:De.a,to:"/data",title:"Data used on this site and licensing",className:e.tapTarget},"Data"),i.a.createElement("br",null),i.a.createElement(Ye.a,{href:"https://github.com/LibrariesHacked/libraries-at-home",target:"_blank",title:"Project on GitHub",className:e.tapTarget},"GitHub"),i.a.createElement("br",null),i.a.createElement(Ye.a,{href:"https://www.librarylab.uk/libraries-at-home",target:"_blank",title:"About the library lab projects and documentation for this project",className:e.tapTarget},"About this project"))),i.a.createElement(ze.a,{className:e.footerRight,item:!0,xs:12,sm:6,md:6,lg:6,xl:6},i.a.createElement(Ve.a,{variant:"body1"},"Data help from"),i.a.createElement(Ve.a,{variant:"button"},i.a.createElement(Ye.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/calire",title:"Claire",className:e.tapTarget},"@calire"),i.a.createElement("br",null),i.a.createElement(Ye.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/shedsue",title:"Sue",className:e.tapTarget},"@shedsue"),i.a.createElement("br",null),i.a.createElement(Ye.a,{rel:"noopener",target:"_blank",href:"https://twitter.com/richardveevers",title:"Richard",className:e.tapTarget},"@richardveevers"),i.a.createElement("br",null),i.a.createElement(Ge.a,{color:"error",className:e.loveIcon})))))},$e=a(137),qe=a(117),Ke=a.n(qe),Xe=a(119),Qe=a.n(Xe),et=a(120),tt=a.n(et),at=a(114),nt=a.n(at),rt=a(115),it=a.n(rt),ct=a(116),ot=a.n(ct),lt=a(118),st=a.n(lt),ut=a(250),mt=a(241),pt=a(44),dt={InstagramIcon:nt.a,FacebookIcon:it.a,TwitterIcon:ot.a},gt=Object(A.a)((function(e){return{alertTitle:{},centerHeader:{marginTop:e.spacing(1),marginBottom:e.spacing(1),textAlign:"center"},header:{marginTop:e.spacing(1),marginBottom:e.spacing(1),textAlign:"center"},socialHeader:{textAlign:"center"},appsHeader:{marginTop:e.spacing(2),textAlign:"center"},root:{paddingTop:e.spacing(2)},serviceName:{fontWeight:e.typography.fontWeightBold},social:{display:"flex",alignItems:"center",justifyContent:"center"},apps:{display:"flex",alignItems:"center",justifyContent:"center"},socialIcon:{marginBottom:e.spacing(2),marginRight:e.spacing(1)},appsIcon:{margin:e.spacing(1)},leadButton:{marginTop:e.spacing(1)},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(2)},linkText:{columnWidth:"16em"},columnLink:{verticalAlign:"middle",display:"inline-flex"}}}));var bt=function(){var e=k(),t=Object(L.a)(e,2),a=t[0].service,n=(t[1],gt());return i.a.createElement("div",{className:n.root},a&&Object.keys(a).length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(Ve.a,{className:n.centerHeader,component:"h2",variant:"h5"},"Your library service is ",i.a.createElement("span",{className:n.serviceName},a.Name)),i.a.createElement("div",{className:n.social},pt.services_text.social.filter((function(e){return e.field in a})).map((function(e,t){var r=dt[e.icon];return i.a.createElement(I.a,{key:"icn_social_"+t,style:{color:e.colour},className:n.socialIcon,target:"_blank",href:e.url+a[e.field],title:e.title,startIcon:i.a.createElement(r,null)},e.title)}))),i.a.createElement("div",{className:n.social},a["Android app URL"]||a["iOS app URL"]?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:n.apps},a["Android app URL"]?i.a.createElement(I.a,{size:"large",color:"primary",className:n.socialIcon,target:"_blank",href:a["Android app URL"],title:"Library app for Android",startIcon:i.a.createElement(Ke.a,null)},"Library app for Android"):null,a["iOS app URL"]?i.a.createElement(I.a,{size:"large",color:"primary",className:n.socialIcon,target:"_blank",href:a["iOS app URL"],title:"Library app for iOS",startIcon:i.a.createElement(st.a,null)},"Library app for iOS"):null)):null),i.a.createElement(ze.a,{container:!0,spacing:3},pt.services_text.library_service.filter((function(e){return e.field in a})).map((function(e,t){return i.a.createElement(ze.a,{key:"grd_service_"+t,item:!0,xs:12,sm:6,md:4,lg:4,xl:4},i.a.createElement(ut.a,{severity:"info"},i.a.createElement(mt.a,{className:n.alertTitle},e.title.replace("[service]",a.Name)),e.description,i.a.createElement("br",null),i.a.createElement(I.a,{className:n.leadButton,size:"large",color:"primary",startIcon:i.a.createElement(Qe.a,null),target:"_blank",href:a[e.field]},e.link_text)))}))),i.a.createElement($e.a,{elevation:0,className:n.linkContainer},i.a.createElement(Ve.a,{component:"h3",variant:"h6",className:n.header},"Useful links"),i.a.createElement(Ve.a,{component:"p",variant:"body1",className:n.linkText},pt.services_text.service_links.filter((function(e){return e.field in a})).map((function(e,t){return i.a.createElement(Ve.a,{key:"typ_links_"+t,component:"span",className:n.columnLink},i.a.createElement(tt.a,{color:"secondary"}),i.a.createElement(Ye.a,{key:"typ_link_"+t,target:"_blank",href:a[e.field],variant:"body1"},e.text),i.a.createElement("br",null))}))))):null)},ft=Object(A.a)((function(e){return{search:{alignContent:"center",textAlign:"center",display:"table",marginLeft:"auto",marginRight:"auto",marginBottom:"10px"},subtitle:{textAlign:"center",marginBottom:"5px"},title:{textAlign:"center"}}}));var ht=function(){var e=ft();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ve.a,{component:"h2",variant:"h6",color:"secondary",className:e.title},"Your library service"),i.a.createElement(Ve.a,{component:"p",variant:"body1",className:e.subtitle},"Search by postcode to find library services in your area"),i.a.createElement("div",{className:e.search},i.a.createElement(Ie,{settings:!1})),i.a.createElement(bt,null))},vt=a(242),yt=a(245),Et=a(244),kt=a(243),xt=a(255),Ot=a(121),jt=a.n(Ot),wt=a(122),Nt=a.n(wt),Tt=a(259),St=a(69),Lt=a.n(St),_t=a(44);function Ct(){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(T.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_t.servicesApi,e.next=3,je.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(){return At.apply(this,arguments)}function At(){return(At=Object(T.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_t.videoApi,e.next=3,je.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(){return It.apply(this,arguments)}function It(){return(It=Object(T.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_t.blogsApi,e.next=3,je.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ft=a(44),Mt=Object(A.a)((function(e){return{header:{textAlign:"center"},subtitle:{textAlign:"center"},card:{position:"relative"},media:{height:150},overlay:{color:"#ffffff",position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%"},overlayTitle:{},playIcon:{color:"#2e7d32"},rating:{marginLeft:e.spacing(1)},video:{maxWidth:"100%"}}}));var Ut=function(){var e=this,t=v(),a=Object(L.a)(t,2),n=a[0],c=n.videos,o=n.services,l=(a[1],j()),s=Object(L.a)(l,2),u=(s[0].loadingVideos,s[1],Mt()),m=Object(r.useState)(!1),p=Object(L.a)(m,2),d=p[0],g=p[1],b=Object(r.useState)(""),f=Object(L.a)(b,2),h=f[0],y=f[1],E=function(e){g(!0),y("https://www.youtube.com/embed/"+e.replace("yt:video:",""))},k=c.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{}),x={};return o.forEach((function(e){e["YouTube ID"]&&(x[e["YouTube ID"]]=e)})),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ve.a,{component:"h2",variant:"h6",color:"secondary",className:u.header},"Library TV"),i.a.createElement(Ve.a,{component:"p",variant:"body1",className:u.subtitle},"Watch videos published by library services on YouTube"),Object.keys(k).map((function(t,a){return i.a.createElement(i.a.Fragment,{key:"frg_dates_"+a},i.a.createElement(de.a,{component:"div",disableSticky:!0},Lt()(t,"YYYY-MM-DD").calendar(null,Ft.calendarDisplay)),i.a.createElement(ze.a,{container:!0,spacing:3},k[t].map((function(t,a){var n=t.custom_elements,r=n.filter((function(e){return"media:group"===Object.keys(e)[0]}))[0]["media:group"],c=r.filter((function(e){return"media:thumbnail"===Object.keys(e)[0]}))[0]["media:thumbnail"],o=r.filter((function(e){return"media:community"===Object.keys(e)[0]}))[0]["media:community"].filter((function(e){return"media:starrating"===Object.keys(e)[0]}))[0]["media:starrating"],l=o._attr.average,s=n.filter((function(e){return"yt:channelid"===Object.keys(e)[0]}))[0]["yt:channelid"],m=x[s],p=function(e){var t=_t.youTubeUrl,a={UC:["channel/","Channel"],PL:["playlist/","Playlist"]}[e.substring(0,2)];return{url:t+(a?a[0]:"user/")+e,type:a?a[1]:"Account"}}(s);return i.a.createElement(ze.a,{key:"grd_vids_"+a,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},i.a.createElement(vt.a,{variant:"outlined",className:u.card},i.a.createElement(kt.a,{className:u.media,image:c._attr.url,title:t.title}),i.a.createElement(Et.a,{className:u.overlay},i.a.createElement(Ve.a,{className:u.overlayTitle,variant:"caption",component:"p"},t.title)),i.a.createElement(yt.a,null,i.a.createElement(I.a,{size:"small",className:u.playIcon,startIcon:i.a.createElement(jt.a,null),onClick:E.bind(e,t.guid)},"Play"),m?i.a.createElement(I.a,{size:"small",color:"secondary",startIcon:i.a.createElement(Nt.a,null),target:"_blank",rel:"noopener",href:p.url},m.Name):null,o&&l&&l>0?i.a.createElement(Y.a,{title:l?"Rated "+l:"No rating","aria-label":"add"},i.a.createElement("span",null,i.a.createElement(Tt.a,{size:"small",className:u.rating,name:"read-only",value:l,precision:.5,readOnly:!0}))):null)))}))),i.a.createElement("br",null))})),i.a.createElement(xt.a,{maxWidth:"sm",onClose:function(){g(!1),y("")},"aria-labelledby":"YouTube dialog",open:d},i.a.createElement("iframe",{title:"Video",className:u.video,width:"560",height:"315",src:h,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})))},Dt=a(123),Wt=a.n(Dt),zt=a(44),Yt=Object(A.a)((function(e){return{columnLink:{verticalAlign:"middle",display:"inline-flex"},header:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(2)},link:{display:"inline"},linkText:{columnWidth:"16em"}}}));var Vt=function(){var e=v(),t=Object(L.a)(e,2),a=t[0].blogs,n=(t[1],Yt()),r=a.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{});return i.a.createElement(i.a.Fragment,null,i.a.createElement($e.a,{elevation:0,className:n.linkContainer},i.a.createElement(Ve.a,{component:"h3",variant:"h6",className:n.header},"Recent blogs"),i.a.createElement(Ve.a,{component:"p",variant:"body1",className:n.linkText},Object.keys(r).slice(0,3).map((function(e,t){return i.a.createElement(i.a.Fragment,{key:"frg_blogdates_"+t},i.a.createElement(de.a,{disableSticky:!0,component:"span",className:n.columnLink},Lt()(e,"YYYY-MM-DD").calendar(null,zt.calendarDisplay)),i.a.createElement("br",null),r[e].map((function(e,t){return i.a.createElement(i.a.Fragment,{key:"typ_links_"+t},i.a.createElement(Ve.a,{component:"span",className:n.columnLink},i.a.createElement(Wt.a,null),i.a.createElement(Ye.a,{className:n.link,key:"typ_link_"+t,target:"_blank",rel:"noopener",href:e.url,variant:"body1"},e.author+". "+e.title)),i.a.createElement("br",null))})))})))))},Ht=Object(A.a)((function(e){return{header:{textAlign:"center"},subtitle:{textAlign:"center"}}}));var Gt=function(){var e=Ht();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ve.a,{component:"h2",variant:"h6",color:"secondary",className:e.header},"Read"),i.a.createElement(Ve.a,{component:"p",variant:"body1",className:e.subtitle},"The things library services are writing"),i.a.createElement(Vt,null))},Jt=a(124),Zt=a.n(Jt),$t=a(44),qt=Object(A.a)((function(e){return{columnLink:{verticalAlign:"middle",display:"inline-flex"},header:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(2)},link:{display:"inline"},linkText:{columnWidth:"16em"}}}));var Kt=function(){var e=v(),t=Object(L.a)(e,2),a=t[0].services,n=(t[1],qt());return i.a.createElement(i.a.Fragment,null,i.a.createElement($e.a,{elevation:0,className:n.linkContainer},i.a.createElement(Ve.a,{component:"h3",variant:"h6",className:n.header},"Library podcasts"),i.a.createElement(Ve.a,{component:"p",variant:"body1",className:n.linkText},a.filter((function(e){return e["Podcast URL"]&&""!==e["Podcast URL"]})).map((function(e,t){return i.a.createElement(i.a.Fragment,{key:"frg_podcasts_"+t},i.a.createElement(Ve.a,{component:"span",className:n.columnLink},i.a.createElement(Zt.a,{color:"secondary"}),i.a.createElement(Ye.a,{className:n.link,rel:"noopener",target:"_blank",href:e[$t.podcasts.url_field],variant:"body1"},e[$t.podcasts.service_name_field]+". "+e[$t.podcasts.podcast_name_field])),i.a.createElement("br",null))})))))},Xt=Object(A.a)((function(e){return{header:{textAlign:"center"},subtitle:{textAlign:"center"}}}));var Qt=function(){var e=Xt();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ve.a,{component:"h2",variant:"h6",color:"secondary",className:e.header},"Listen"),i.a.createElement(Ve.a,{component:"p",variant:"body1",className:e.subtitle},"Beautiful noise"),i.a.createElement(Kt,null))},ea=a(135),ta=a(125),aa=a(5),na=Object(A.a)((function(e){return{listItem:{marginTop:e.spacing(1)},root:{"& table":{display:"block",wordBreak:"normal",width:"100%",overflowX:"auto",WebkitOverflowScrolling:"touch",borderCollapse:"collapse",marginBottom:"16px",borderSpacing:0,overflow:"hidden","& .prop-name":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace'},"& .required":{color:"light"===e.palette.type?"#006500":"#a5ffa5"},"& .prop-type":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace',color:"light"===e.palette.type?"#932981":"#ffb6ec"},"& .prop-default":{fontSize:13,fontFamily:'Consolas, "Liberation Mono", Menlo, monospace',borderBottom:"1px dotted ".concat(e.palette.divider)}},"& td":Object(l.a)(Object(l.a)({},e.typography.body2),{},{borderBottom:"1px solid ".concat(e.palette.divider),padding:16,color:e.palette.text.primary}),"& th":{fontSize:14,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium,color:e.palette.text.primary,whiteSpace:"pre",borderBottom:"1px solid ".concat(e.palette.divider),padding:16}}}})),ra={overrides:{h1:{component:Ve.a,props:{gutterBottom:!0,variant:"h4",color:"secondary"}},h2:{component:Ve.a,props:{gutterBottom:!0,variant:"h5",color:"secondary"}},h3:{component:Ve.a,props:{gutterBottom:!0,variant:"h6",color:"secondary"}},h4:{component:Ve.a,props:{gutterBottom:!0,variant:"h6",paragraph:!0,color:"secondary"}},p:{component:Ve.a,props:{paragraph:!0,color:"secondary"}},a:{component:Ye.a},li:{component:Object(aa.a)(na)((function(e){var t=e.classes,a=Object(ea.a)(e,["classes"]);return i.a.createElement("li",{className:t.listItem},i.a.createElement(Ve.a,Object.assign({component:"span"},a)))}))}}};var ia=function(e){var t=e.page,a=Object(r.useState)(""),n=Object(L.a)(a,2),c=n[0],o=n[1],l=na();return Object(r.useEffect)((function(){function e(){return(e=Object(T.a)(N.a.mark((function e(){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:return a=e.sent,e.next=5,a.text();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),i.a.createElement(ta.a,Object.assign({className:l.root,options:ra},e),c)},ca=a(127),oa=a.n(ca),la=a(128),sa=a.n(la),ua=a(129),ma=a.n(ua),pa=a(130),da=a.n(pa),ga=Object(A.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1}}}));var ba=function(){var e=j(),t=Object(L.a)(e,1)[0],a=t.loadingServices,n=t.loadingVideos,c=t.loadingBlogs,o=t.loadingPostcode,l=v(),s=Object(L.a)(l,2),u=s[0],m=(u.videos,u.blogs,u.services,u.service,s[1]),p=j(),d=Object(L.a)(p,2);Object(S.a)(d[0]);var g=d[1];Object(r.useEffect)((function(){function e(){return(e=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"ToggleLoadingServices"}),e.next=3,Ct();case 3:t=e.sent,m({type:"AddServices",services:t}),g({type:"ToggleLoadingServices"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"ToggleLoadingVideos"}),e.next=3,Pt();case 3:t=e.sent,m({type:"AddVideos",videos:t}),g({type:"ToggleLoadingVideos"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"ToggleLoadingBlogs"}),e.next=3,Bt();case 3:t=e.sent,m({type:"AddBlogs",blogs:t}),g({type:"ToggleLoadingBlogs"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),function(){a.apply(this,arguments)}()}),[m,g]);var b=ga(),f=a||n||c||o;return i.a.createElement(_.a,null,i.a.createElement("div",{className:b.root},i.a.createElement(Me,{site:1,loading:a||n||c}),f?i.a.createElement(P.a,{color:"primary"}):null,i.a.createElement(R.a,{maxWidth:"lg"},i.a.createElement("main",{className:b.content},i.a.createElement(C.Route,{path:"/",exact:!0,render:function(){return i.a.createElement(ht,null)}}),i.a.createElement(C.Route,{path:"/watch",exact:!0,render:function(){return i.a.createElement(Ut,null)}}),i.a.createElement(C.Route,{path:"/read",exact:!0,render:function(){return i.a.createElement(Gt,null)}}),i.a.createElement(C.Route,{path:"/listen",exact:!0,render:function(){return i.a.createElement(Qt,null)}}),i.a.createElement(C.Route,{path:"/about",exact:!0,render:function(){return i.a.createElement(ia,{page:oa.a})}}),i.a.createElement(C.Route,{path:"/accessibility",exact:!0,render:function(){return i.a.createElement(ia,{page:sa.a})}}),i.a.createElement(C.Route,{path:"/data",exact:!0,render:function(){return i.a.createElement(ia,{page:ma.a})}}),i.a.createElement(C.Route,{path:"/privacy",exact:!0,render:function(){return i.a.createElement(ia,{page:da.a})}}),i.a.createElement(C.Route,{path:["/http:","/https:"],component:function(e){return window.location.replace(e.location.pathname.substr(1)),null}}))),i.a.createElement(R.a,{maxWidth:"lg"},i.a.createElement(Ze,null))))},fa={services:[],videos:[],blogs:[]},ha=function(e,t){switch(t.type){case"AddServices":return Object(l.a)(Object(l.a)({},e),{},{services:t.services});case"AddVideos":return Object(l.a)(Object(l.a)({},e),{},{videos:t.videos});case"AddBlogs":return Object(l.a)(Object(l.a)({},e),{},{blogs:t.blogs});default:return e}},va={searchPostcode:"",searchType:"",searchDistance:1609,searchPosition:[],service:{}},ya=function(e,t){switch(t.type){case"SetSearchDistance":return Object(l.a)(Object(l.a)({},e),{},{searchDistance:t.searchDistance});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{searchPostcode:t.searchPostcode,searchPosition:t.searchPosition,searchType:"postcode"});case"SetService":return Object(l.a)(Object(l.a)({},e),{},{service:t.service});case"ClearAll":return Object(l.a)(Object(l.a)({},e),{},{searchPostcode:"",searchPosition:[],searchType:"",service:{}});default:return e}},Ea={notificationOpen:!1,notificationMessage:"",loadingPostcode:!1,loadingServices:!1,loadingVideos:!1,loadingBlogs:!1},ka=function(e,t){switch(t.type){case"SetNotificationMessage":return Object(l.a)(Object(l.a)({},e),{},{notificationMessage:t.notificationMessage});case"SetNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:t.notificationOpen});case"ShowNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:!0,notificationMessage:t.notificationMessage});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{loadingPostcode:!1,mapPosition:t.mapPosition,mapZoom:[13]});case"ToggleLoadingPostcode":return Object(l.a)(Object(l.a)({},e),{},{loadingPostcode:!e.loadingPostcode});case"ToggleLoadingServices":return Object(l.a)(Object(l.a)({},e),{},{loadingServices:!e.loadingServices});case"ToggleLoadingVideos":return Object(l.a)(Object(l.a)({},e),{},{loadingVideos:!e.loadingVideos});case"ToggleLoadingBlogs":return Object(l.a)(Object(l.a)({},e),{},{loadingBlogs:!e.loadingBlogs});default:return e}},xa=Object(g.a)({palette:{primary:{main:m.a[800]},secondary:{main:d.a[600]}},overrides:{MuiButton:{text:{textTransform:"none"},root:{textTransform:"none"}},MuiTypography:{button:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}});var Oa=function(){return i.a.createElement(h,{initialState:fa,reducer:ha},i.a.createElement(E,{initialState:va,reducer:ya},i.a.createElement(O,{initialState:Ea,reducer:ka},i.a.createElement(b.a,{theme:xa},i.a.createElement(s.a,null),i.a.createElement(ba,null)))))};a(178);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Oa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},44:function(e){e.exports=JSON.parse('{"postcodeApi":"https://api-geography.librarydata.uk/rest/postcodes/","videoApi":"https://api.librarydata.uk/services/airtable/feeds/youtube.json","blogsApi":"https://api.librarydata.uk/services/airtable/feeds/blogs.json","servicesApi":"https://api.librarydata.uk/services/airtable","youTubeUrl":"https://www.youtube.com/","calendarDisplay":{"lastDay":"[From Yesterday]","sameDay":"[New Today]","nextDay":"[Tomorrow]","lastWeek":"[Last] dddd","nextWeek":"dddd","sameElse":"L"},"services_text":{"social":[{"field":"Instagram name","icon":"InstagramIcon","url":"https://www.instagram.com/","title":"See pictures on Instagram","colour":"#405DE6"},{"field":"Facebook page name","icon":"FacebookIcon","url":"https://www.facebook.com/","title":"Follow on Facebook","colour":"#4267B2"},{"field":"Twitter handle","icon":"TwitterIcon","url":"https://twitter.com/","title":"See library tweets","colour":"#1DA1F2"}],"library_service":[{"field":"Service URL","title":"Visit [service] website","description":"Information about your library service","link_text":"Go to the website"},{"field":"Catalogue URL","title":"Browse the catalogue","description":"Find an item to borrow","link_text":"Online catalogue"},{"field":"New member URL","title":"Join [service] libraries","description":"Start having fun","link_text":"Join now"},{"field":"Childrens service URL","title":"Info for children","description":"Libraries for everyone","link_text":"See children\'s services"},{"field":"Audiobook URL","title":"Library audiobooks","description":"Listen to stories","link_text":"Find an audiobook"},{"field":"Ebook URL","title":"Library ebooks","description":"Read ebooks on devices","link_text":"Find an ebook"}],"service_links":[{"field":"Libraries URL","text":"Find your local library"},{"field":"Mobile libraries URL","text":"Discover when the mobile library visits"},{"field":"Home service URL","text":"Check if the library can come to your home"},{"field":"Events URL","text":"See events in libraries"},{"field":"Computer access URL","text":"Book a computer in the library"},{"field":"Wifi access URL","text":"Use Wifi in the library"},{"field":"Fees and charges URL","text":"Understand fees and charges for library services"},{"field":"News or Blog URL","text":"Read latest library news"},{"field":"Podcast URL","text":"Listen to a library Podcast"}]},"podcasts":{"service_name_field":"Name","podcast_name_field":"Podcast name","url_field":"Podcast URL"}}')}},[[145,1,2]]]);
//# sourceMappingURL=main.51dfbfaa.chunk.js.map